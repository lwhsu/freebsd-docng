<?xml version="1.0" encoding="koi8-r"?>
<!--
     The FreeBSD Russian Documentation Project

     $FreeBSD$
     $FreeBSDru: frdp/doc/ru_RU.KOI8-R/books/handbook/l10n/chapter.xml,v 1.20 2007/06/26 11:42:42 den Exp $

     Original revision: r53208
-->
<chapter xmlns="http://docbook.org/ns/docbook"
  xmlns:xlink="http://www.w3.org/1999/xlink" version="5.0"
  xml:id="l10n">
  <info>
    <title>Локализация - использование и настройка
      <acronym>i18n</acronym>/<acronym>L10n</acronym></title>

    <authorgroup>
      <author><personname><firstname>Andrey</firstname><surname>Chernov</surname></personname><contrib>Предоставил </contrib></author>
    </authorgroup>
    <authorgroup>
      <author><personname><firstname>Michael C.</firstname><surname>Wu</surname></personname><contrib>Переписал </contrib></author>
      <!-- 30 Nv 2000 -->
    </authorgroup>
    <authorgroup>
      <author><personname><firstname>Александр</firstname><surname>Пересунко</surname></personname><contrib>Перевод на русский язык: </contrib></author>
      <author><personname><firstname>Денис</firstname><surname>Пеплин</surname></personname></author>
    </authorgroup>
  </info>

  <sect1 xml:id="l10n-synopsis">
    <title>Краткий обзор</title>

    <para>&os; - это распределенный проект, пользователи
      и контрибьюторы которого находятся в самых разных частях света.
      Поэтому &os; поддерживает локализацию на многие языки, что
      позволяет просматривать, вводить и обрабатывать данные на
      языках, отличных от английского.  Можно выбрать среди
      большинства основных языков, в том числе: китайский,
      немецкий, японский, корейский, французский, русский и
      вьетнамский.</para>

    <indexterm>
      <primary>интернационализация</primary>
      <see>локализация</see>
    </indexterm>
    <indexterm><primary>локализация</primary></indexterm>

    <para>Термин интернационализация
      (<literal>internationalization</literal>) сокращают до
      <acronym>i18n</acronym>, по числу символов в английском слове.
      Сокращение <acronym>L10n</acronym> аналогично получается от
      слова <literal>localization</literal>.
      <acronym>i18n</acronym>/<acronym>L10n</acronym> методы,
      протоколы и приложения позволяют пользователям использовать
      языки по своему выбору.</para>

    <para>В этой главе обсуждаются особенности интернационализации и
      локализации &os;, включая следующие темы:</para>

    <itemizedlist>
      <listitem>
	<para>Схема именования локалей.</para>
      </listitem>

      <listitem>
	<para>Установка региональных настроек для оболочки.</para>
      </listitem>

      <listitem>
	<para>Локализация консоли.</para>
      </listitem>

      <listitem>
	<para>Локализация <application>Xorg</application>.</para>
      </listitem>

      <listitem>
	<para>Поиск <acronym>i18n</acronym>-совместимых
	  приложений.</para>
      </listitem>

      <listitem>
	<para>Информация по настройке для некоторых языков.</para>
      </listitem>
    </itemizedlist>

    <para>Перед чтением этой главы вам следует знать:</para>

    <itemizedlist>
      <listitem><para>Как <link linkend="ports">установить
	дополнительные приложения сторонних
	разработчиков</link>.</para></listitem>
    </itemizedlist>
  </sect1>

  <sect1 xml:id="using-localization">
    <title>Использование локализации</title>

    <indexterm><primary>локаль</primary></indexterm>

    <para>Настройки локализации состоят из трёх компонентов: код
      языка, код страны и кодировка.  Из этих частей формируются
      названия локалей:</para>

    <programlisting><replaceable>КодЯзыка</replaceable>_<replaceable>КодСтраны</replaceable>.<replaceable>Кодировка</replaceable></programlisting>

    <indexterm><primary>коды языка</primary></indexterm>
    <indexterm><primary>коды страны</primary></indexterm>

    <para><replaceable>КодЯзыка</replaceable> и
      <replaceable>КодСтраны</replaceable> используются для
      определения страны и конкретного диалекта языка.  <xref
	linkend="locale-lang-country"/> содержит некоторые примеры
      пар <replaceable>КодЯзыка</replaceable>_<replaceable>КодСтраны</replaceable>:</para>

    <table xml:id="locale-lang-country" frame="none" pgwide="1">
      <title>Основные коды языка и страны</title>

      <tgroup cols="2">
	<thead>
	  <row>
	    <entry>КодЯзыка_КодСтраны</entry>
	    <entry>Описание</entry>
	  </row>
	</thead>

	<tbody>
	  <row>
	    <entry>en_US</entry>
	    <entry>Английский, Соединенные Штаты</entry>
	  </row>

	  <row>
	    <entry>ru_RU</entry>
	    <entry>Русский, Россия</entry>
	  </row>

	  <row>
	    <entry>zh_TW</entry>
	    <entry>Традиционный китайский, Тайвань</entry>
	  </row>
	</tbody>
      </tgroup>
    </table>

    <para>Полный список локалей доступен по команде:</para>

    <screen>&prompt.user; <userinput>locale -a | more</userinput></screen>

    <para>Чтобы определить текущую локаль:</para>

    <screen>&prompt.user; <userinput>locale</userinput></screen>

    <indexterm><primary>кодировки</primary></indexterm>
    <indexterm><primary>ASCII</primary></indexterm>

    <para>Специфичные для языков наборы символов ISO8859-1,
      ISO8859-15, KOI8-R, CP437 описаны в &man.multibyte.3;.
      Актуальный список наборов символов находится на сайте <link
	xlink:href="http://www.iana.org/assignments/character-sets">IANA
	Registry</link>.</para>

    <para>Некоторые языки, такие как китайский или японский, не могут
      быть представлены с использованием символов
      <acronym>ASCII</acronym>, и для них требуется дополненная
      языковая кодировка с использованием расширенного или
      многобайтового представления символов.  Такими кодировками
      являются EUC и Big5.  Старые приложения могут ошибочно
      принимать символы в таких кодировках за управляющие, в то время
      как новые обычно их распознают.  В зависимости от реализации,
      пользователю может потребоваться компиляция приложения с
      поддержкой расширенного или многобайтового представления
      символов или правильная его настройка.</para>

    <note>
      <para>Во &os; используются Xorg-совместимые кодировки.</para>
    </note>

    <para>В продолжении этого раздела рассматриваются различные
      способы настройки локализации в системе &os;.  В следующем
      разделе выносятся соображения по поиску и компиляции
      приложений с поддержкой <acronym>i18n</acronym>.</para>

    <sect2 xml:id="setting-locale">
      <title>Настройка локализации для оболочки</title>

      <para>Для настроек локализации используется
	пользовательский <filename>~/.login_conf</filename> или
	инициализационый файл пользовательской оболочки:
	<filename>~/.profile</filename>,
	<filename>~/.bashrc</filename> или
	<filename>~/.cshrc</filename>.</para>

      <para>Следует задать две переменные окружения:</para>

      <itemizedlist>
	<listitem>
	  <para><envar>LANG</envar> задаёт локаль<indexterm>
	    <primary>POSIX</primary></indexterm></para>
	</listitem>

	<listitem>
	  <indexterm><primary>MIME</primary></indexterm>

	  <para><envar>MM_CHARSET</envar> задаёт набор символов
	    <acronym>MIME</acronym> для приложений</para>
	</listitem>
      </itemizedlist>

      <para>В дополнение к настройкам пользовательской оболочки
	эти переменные также следует задать в конфигурации
	конкретного приложения и в конфигурации
	<application>Xorg</application>.</para>

      <indexterm><primary>локаль</primary></indexterm>
      <indexterm><primary>класс логина</primary></indexterm>

      <para>Существует два способа выполнить необходимые присвоения
	переменным: <link linkend="login-class">класс логина</link>,
	который является рекомендуемым, и <link
	  linkend="startup-file">файл инициализации</link>.
	В следующих двух разделах будет показано, как использовать
	оба способа.</para>

      <sect3 xml:id="login-class">
	<title>Настройка через классы логина</title>

	<para>Первый способ является рекомендуемым, поскольку в нём
	  необходимые для выбора локализации и набора символов
	  <acronym>MIME</acronym> значения переменных окружения
	  присваиваются для всех оболочек.  Эту процедуру может
	  выполнить пользователь для себя, а также это может сделать
	  в виде настройки суперпользователь для всех пользователей
	  системы.</para>

	<para>В этом минимальном примере обе переменные задаются для
	  кодировки Latin-1 в <filename>.login_conf</filename>
	  домашнего каталога отдельного пользователя:</para>

	<programlisting>me:\
	:charset=ISO-8859-1:\
	:lang=de_DE.ISO8859-1:</programlisting>

	<indexterm><primary>традиционный китайский</primary>
	  <secondary>кодировка BIG-5</secondary></indexterm>

	<para>Ниже дан <filename>~/.login_conf</filename>, в котором
	  переменные заданы для традиционного китайского в кодировке
	  BIG-5.  Здесь нужно больше переменных, потому что некоторые
	  программы некорректно воспринимают переменные окружения
	  локализации для Китая, Японии и Кореи:</para>

	<programlisting>#Пользователи, которые не хотят использовать денежные единицы
#и форматы времени Тайваня, могут вручную изменить каждую переменную
me:\
	:lang=zh_TW.Big5:\
	:setenv=LC_ALL=zh_TW.Big5,LC_COLLATE=zh_TW.Big5,LC_CTYPE=zh_TW.Big5,LC_MESSAGES=zh_TW.Big5,LC_MONETARY=zh_TW.Big5,LC_NUMERIC=zh_TW.Big5,LC_TIME=zh_TW.Big5:\
	:charset=big5:\
	:xmodifiers="@im=gcin": #Set gcin as the XIM Input Server</programlisting>

	<para>Как вариант, суперпользователь может настроить
	  локализацию для всех пользователей системы.  Следующие
	  переменные в <filename>/etc/login.conf</filename>
	  используются для установки локализации и набора символов
	  <acronym>MIME</acronym>:</para>

	<programlisting><replaceable>название_языка</replaceable>|<replaceable>подробное описание</replaceable>:\
	:charset=<replaceable>кодировка_MIME</replaceable>:\
	:lang=<replaceable>название_локализации</replaceable>:\
	:tc=default:</programlisting>

	<para>Таким образом, на предыдущем примере с Latin-1
	  это бы выглядело так:</para>

	<programlisting>german|German Users Accounts:\
	:charset=ISO-8859-1:\
	:lang=de_DE.ISO8859-1:\
	:tc=default:</programlisting>

	<para>За информацией по этим переменным обращайтесь к
	  &man.login.conf.5;.  Отметим, что там уже присутствует
	  класс <replaceable>russian</replaceable>.</para>

	<para>После каждого изменения
	  <filename>/etc/login.conf</filename> не забывайте выполнить
	  команду для обновления базы данных:</para>

	<screen>&prompt.root; <userinput>cap_mkdb /etc/login.conf</userinput></screen>

	<sect4>
	  <title>Утилиты для смены класса логина</title>

	  <indexterm>
	    <primary><command>vipw</command></primary>
	  </indexterm>

	  <para>В дополнение к ручному редактированию
	    <filename>/etc/login.conf</filename> имеется несколько
	    утилит, которые позволяют задать локаль при создании
	    новых пользователей:</para>

	  <para>Если для добавлении новых пользователей
	    используется <command>vipw</command>, то чтобы задать
	    локаль, укажите <replaceable>язык</replaceable>:</para>

	  <programlisting>user:password:1111:11:<replaceable>язык</replaceable>:0:0:User Name:/home/user:/bin/sh</programlisting>

	  <indexterm>
	    <primary><command>adduser</command></primary>
	  </indexterm>
	  <indexterm><primary>класс логина</primary></indexterm>

	  <para>Если для добавления новых пользователей используется
	    <command>adduser</command>, то язык по умолчанию можно
	    предварительно выбрать для всех новых пользователей
	    или указать его для отдельного пользователя.</para>

	  <para>Если все новые пользователи используют общий язык,
	    задайте <literal>defaultclass=<replaceable>язык</replaceable></literal>
	    в <filename>/etc/adduser.conf</filename>.</para>

	  <para>Чтобы переопределить эту настройку при создании
	    пользователя, введите требуемую локаль в запросе
	    командной строки:</para>

	  <screen><prompt>Enter login class: default []: </prompt></screen>

	  <para>или укажите её в команде &man.adduser.8;:</para>

	  <screen>&prompt.root; <userinput>adduser -class <replaceable>язык</replaceable></userinput></screen>

	  <indexterm>
	    <primary><command>pw</command></primary>
	  </indexterm>

	  <para>Если для добавления новых пользователей используется
	    <command>pw</command>, укажите локаль так:</para>

	  <screen>&prompt.root; <userinput>pw useradd <replaceable>имя_пользователя</replaceable> -L <replaceable>язык</replaceable></userinput></screen>

	  <indexterm>
	    <primary><command>chpass</command></primary>
	  </indexterm>

	  <para>Изменить класс логина у существующего пользователя
	    можно с помощью <command>chpass</command>, передав имя
	    пользователя через параметр:</para>

	  <screen>&prompt.root; <userinput>chpass <replaceable>имя_пользователя</replaceable></userinput></screen>
	</sect4>
      </sect3>

      <sect3 xml:id="startup-file">
	<title>Файл инициализации оболочки</title>

	<para>Второй способ не рекомендуется, поскольку для каждой
	  используемой оболочки требуется ручная конфигурация, при
	  этом в каждой оболочке используется собственный файл
	  конфигурации и разный синтаксис.  Например, чтобы задать
	  немецкий язык в оболочке <command>sh</command>, эти
	  строчки можно было бы добавить в
	  <filename>~/.profile</filename> для настройки оболочки
	  отдельного пользователя.  Также их можно было бы добавить
	  в <filename>/etc/profile</filename> или
	  <filename>/usr/share/skel/dot.profile</filename>, чтобы
	  применить ко всем пользователям:</para>

	<programlisting><envar>LANG</envar>=de_DE.ISO8859-1; export <envar>LANG</envar>
<envar>MM_CHARSET</envar>=ISO-8859-1; export <envar>MM_CHARSET</envar></programlisting>

	<para>Тем не менее, путь к файлу конфигурации и используемый
	  синтаксис отличаются в оболочке <command>csh</command>.
	  Следующие настройки можно одинаково успешно задать в
	  <filename>~/.csh.login</filename>,
	  <filename>/etc/csh.login</filename> и
	  <filename>/usr/share/skel/dot.login</filename>:</para>

	<programlisting>setenv <envar>LANG</envar> de_DE.ISO8859-1
setenv <envar>MM_CHARSET</envar> ISO-8859-1</programlisting>

	<para>Используемый в <filename>~/.xinitrc</filename>
	  синтаксис для настройки <application>Xorg</application>
	  также зависит от оболочки.  Первый пример для оболочки
	  <command>sh</command>, и второй для
	  <command>csh</command>:</para>

	<programlisting><envar>LANG</envar>=de_DE.ISO8859-1; export <envar>LANG</envar></programlisting>

	<programlisting>setenv <envar>LANG</envar> de_DE.ISO8859-1</programlisting>
      </sect3>
    </sect2>

    <sect2 xml:id="setting-console">
      <title>Настройка консоли</title>

      <para>Для консоли имеется несколько локализованных шрифтов.
	Для их просмотра наберите
	<command>ls /usr/share/syscons/fonts</command>.
	Чтобы настроить консольный шрифт,
	укажите в <filename>/etc/rc.conf</filename>
	<replaceable>имя_шрифта</replaceable> без расширения
	<filename>.fnt</filename>:</para>

      <programlisting>font8x16=<replaceable>имя_шрифта</replaceable>
font8x14=<replaceable>имя_шрифта</replaceable>
font8x8=<replaceable>имя_шрифта</replaceable></programlisting>

      <indexterm><primary>keymap</primary></indexterm>
      <indexterm><primary>screenmap</primary></indexterm>
      <para>Значения keymap и screenmap можно задать в
	<filename>/etc/rc.conf</filename>:</para>

      <programlisting>scrnmap=<replaceable>название_screenmap</replaceable>
keymap=<replaceable>название_keymap</replaceable>
keychange="<replaceable>последовательность fkey_number</replaceable>"</programlisting>

      <para>Чтобы просмотреть доступные таблицы screenmap, наберите
	<command>ls /usr/share/syscons/scrnmaps</command>.  Значение
	<replaceable>screenmap</replaceable> указывается без
	расширения <filename>.scm</filename>.  Таблица screenmap с
	соответствующим шрифтом обычно используется в качестве
	обходного пути для расширения 8 бит до 9 бит в матрице символов
	шрифта адаптора VGA.  Это будет приводить к вынесению букв за
	границы псевдографической области,
	если используется 8-битный шрифт.</para>

      <para>Чтобы просмотреть доступные таблицы keymap, наберите
	<command>ls /usr/share/syscons/keymaps</command>.  Значение
	<replaceable>keymap</replaceable> указывается без расширения
	<filename>.kbd</filename>.  Чтобы проверить keymap без
	перезагрузки системы, используйте &man.kbdmap.1;.</para>

      <para>Запись <literal>keychange</literal> обычно нужна для
	сопоставления функциональных клавиш выбранному типу
	терминала, поскольку последовательности функциональных клавиш
	не могут быть определены в keymap.</para>

      <para>После этого задайте правильный консольный тип терминала
	в <filename>/etc/ttys</filename> для всех виртуальных
	терминалов.  <xref linkend="locale-charset"/> содержит
	доступные типы терминалов:</para>

      <table xml:id="locale-charset" frame="none" pgwide="1">
	<title>Типы терминалов для набора символов</title>

	<tgroup cols="2">
	  <thead>
	    <row>
	      <entry>Набор символов</entry>
	      <entry>Тип терминала</entry>
	    </row>
	  </thead>

	  <tbody>
	    <row>
	      <entry>ISO8859-1 or ISO8859-15</entry>
	      <entry><literal>cons25l1</literal></entry>
	    </row>

	    <row>
	      <entry>ISO8859-2</entry>
	      <entry><literal>cons25l2</literal></entry>
	    </row>

	    <row>
	      <entry>ISO8859-7</entry>
	      <entry><literal>cons25l7</literal></entry>
	    </row>

	    <row>
	      <entry>KOI8-R</entry>
	      <entry><literal>cons25r</literal></entry>
	    </row>

	    <row>
	      <entry>KOI8-U</entry>
	      <entry><literal>cons25u</literal></entry>
	    </row>

	    <row>
	      <entry>CP437 (VGA default)</entry>
	      <entry><literal>cons25</literal></entry>
	    </row>

	    <row>
	      <entry>US-ASCII</entry>
	      <entry><literal>cons25w</literal></entry>
	    </row>
	  </tbody>
	</tgroup>
      </table>

      <indexterm>
	<primary><application>moused</application></primary>
      </indexterm>

      <para>Для языков с расширенной или многобайтовой кодировкой
	установите консоль для данного языка из Коллекции Портов
	&os;.  <xref linkend="locale-console"/> содержит доступные
	порты.  После установки смотрите
	<filename>pkg-message</filename> или страницы Справочника
	по конфигурации и использованию данного порта.</para>

      <table xml:id="locale-console" frame="none" pgwide="1">
	<title>Доступные консоли из Коллекции Портов</title>

	<tgroup cols="2">
	  <thead>
	    <row>
	      <entry>Язык</entry>
	      <entry>Расположение порта</entry>
	    </row>
	  </thead>

	  <tbody>
	    <row>
	      <entry>Традиционный китайский (BIG-5)</entry>
	      <entry><package>chinese/big5con</package></entry>
	    </row>

	    <row>
	      <entry>Chinese/Japanese/Korean</entry>
	      <entry><package>chinese/cce</package></entry>
	    </row>

	    <row>
	      <entry>Chinese/Japanese/Korean</entry>
	      <entry><package>chinese/zhcon</package></entry>
	    </row>

	    <row>
	      <entry>Japanese</entry>
	      <entry><package>chinese/kon2</package></entry>
	    </row>

	    <row>
	      <entry>Japanese</entry>
	      <entry><package>japanese/kon2-14dot</package></entry>
	    </row>

	    <row>
	      <entry>Japanese</entry>
	      <entry><package>japanese/kon2-16dot</package></entry>
	    </row>
	  </tbody>
	</tgroup>
      </table>

      <para>Если <application>moused</application> включен
	в <filename>/etc/rc.conf</filename>, может потребоваться
	дополнительная настройка.  По умолчанию драйвер
	&man.syscons.4; выделяет для курсора мыши в таблице символов
	диапазон <literal>0xd0</literal>-<literal>0xd3</literal>.
	Если в языке этот диапазон используется, переместите диапазон
	курсора посредством добавления следующей строки в
	<filename>/etc/rc.conf</filename>:</para>

      <programlisting>mousechar_start=3</programlisting>
    </sect2>

    <sect2>
      <title>Настройка Xorg</title>

      <para><xref linkend="x11"/> описывает процедуру установки и
	настройки <application>Xorg</application>.  Для настройки
	локализации <application>Xorg</application> в Коллекции
	Портов &os; имеются дополнительные шрифты и методы ввода.
	Настройки <acronym>i18n</acronym> для отдельных приложений,
	такие как шрифты и меню, можно внести в
	<filename>~/.Xresources</filename>, чтобы меню в графических
	приложениях отображались на выбранном языке.</para>

      <indexterm><primary>X Input Method (XIM)</primary></indexterm>

      <para>Протокол X Input Method (<acronym>XIM</acronym>) - это
	стандарт <application>Xorg</application> для ввода
	неанглийских символов.  <xref linkend="locale-xim"/>
	описывает приложения для методов ввода, которые содержатся
	в Коллекции Портов &os;.  Также доступны дополнительные
	приложения Fcitx и Uim.</para>

      <table xml:id="locale-xim" frame="none" pgwide="1">
	<title>Доступные метода ввода</title>

	<tgroup cols="2">
	 <thead>
	   <row>
	     <entry>Язык</entry>
	     <entry>Метод ввода</entry>
	   </row>
	 </thead>

	 <tbody>
	   <row>
	     <entry>китайский</entry>
	     <entry><package>chinese/gcin</package></entry>
	   </row>

	   <row>
	     <entry>китайский</entry>
	     <entry><package>chinese/ibus-chewing</package></entry>
	   </row>

	   <row>
	     <entry>китайский</entry>
	     <entry><package>chinese/ibus-pinyin</package></entry>
	   </row>

	   <row>
	     <entry>китайский</entry>
	     <entry><package>chinese/oxim</package></entry>
	   </row>

	   <row>
	     <entry>китайский</entry>
	     <entry><package>chinese/scim-fcitx</package></entry>
	   </row>

	   <row>
	     <entry>китайский</entry>
	     <entry><package>chinese/scim-pinyin</package></entry>
	   </row>

	   <row>
	     <entry>китайский</entry>
	     <entry><package>chinese/scim-tables</package></entry>
	   </row>

	   <row>
	     <entry>японский</entry>
	     <entry><package>japanese/ibus-anthy</package></entry>
	   </row>

	   <row>
	     <entry>японский</entry>
	     <entry><package>japanese/ibus-mozc</package></entry>
	   </row>

	   <row>
	     <entry>японский</entry>
	     <entry><package>japanese/ibus-skk</package></entry>
	   </row>

	   <row>
	     <entry>японский</entry>
	     <entry><package>japanese/im-ja</package></entry>
	   </row>

	   <row>
	     <entry>японский</entry>
	     <entry><package>japanese/kinput2</package></entry>
	   </row>

	   <row>
	     <entry>японский</entry>
	     <entry><package>japanese/scim-anthy</package></entry>
	   </row>

	   <row>
	     <entry>японский</entry>
	     <entry><package>japanese/scim-canna</package></entry>
	   </row>

	   <row>
	     <entry>японский</entry>
	     <entry><package>japanese/scim-honoka</package></entry>
	   </row>

	   <row>
	     <entry>японский</entry>
	     <entry><package>japanese/scim-honoka-plugin-romkan</package></entry>
	   </row>

	   <row>
	     <entry>японский</entry>
	     <entry><package>japanese/scim-honoka-plugin-wnn</package></entry>
	   </row>

	   <row>
	     <entry>японский</entry>
	     <entry><package>japanese/scim-prime</package></entry>
	   </row>

	   <row>
	     <entry>японский</entry>
	     <entry><package>japanese/scim-skk</package></entry>
	   </row>

	   <row>
	     <entry>японский</entry>
	     <entry><package>japanese/scim-tables</package></entry>
	   </row>

	   <row>
	     <entry>японский</entry>
	     <entry><package>japanese/scim-tomoe</package></entry>
	   </row>

	   <row>
	     <entry>японский</entry>
	     <entry><package>japanese/scim-uim</package></entry>
	   </row>

	   <row>
	     <entry>японский</entry>
	     <entry><package>japanese/skkinput</package></entry>
	   </row>

	   <row>
	     <entry>японский</entry>
	     <entry><package>japanese/skkinput3</package></entry>
	   </row>

	   <row>
	     <entry>японский</entry>
	     <entry><package>japanese/uim-anthy</package></entry>
	   </row>

	   <row>
	     <entry>корейский</entry>
	     <entry><package>korean/ibus-hangul</package></entry>
	   </row>

	   <row>
	     <entry>корейский</entry>
	     <entry><package>korean/imhangul</package></entry>
	   </row>

	   <row>
	     <entry>корейский</entry>
	     <entry><package>korean/nabi</package></entry>
	   </row>

	   <row>
	     <entry>корейский</entry>
	     <entry><package>korean/scim-hangul</package></entry>
	   </row>

	   <row>
	     <entry>корейский</entry>
	     <entry><package>korean/scim-tables</package></entry>
	   </row>

	   <row>
	     <entry>вьетнамский</entry>
	     <entry><package>vietnamese/xvnkb</package></entry>
	   </row>

	   <row>
	     <entry>вьетнамский</entry>
	     <entry><package>vietnamese/x-unikey</package></entry>
	   </row>
	 </tbody>
       </tgroup>
      </table>
    </sect2>
<!--
    <sect2>
      <title>Настройка принтера</title>

      <para>Некоторые однобайтовые кодовые таблицы запрограммированы
	в принтерах на аппаратном уровне.  Для расширенных или
	многобайтовых кодовых таблиц в этом случае требуется
	дополнительная настройка, например, с использованием утилиты
	<application>apsfilter</application>.  Преобразовать документ
	в формат &postscript; PDF можно с помощью поддерживающих
	соответствующий язык программ.</para>
    </sect2>

    <sect2>
      <title>Ядро и файловые системы</title>

      <para>Файловая система &os; (<acronym>FFS</acronym>) работает
	с 8-битными символами, поэтому её можно использовать с любой
	односимвольной кодовой таблицей.  Тем не менее, эта файловая
	система не хранит в себе кодовые таблицы, поскольку эти 8 бит
	не обрабатываются, и ей не известен порядок кодирования.
	Официально <acronym>FFS</acronym> не поддерживает расширенные
	и многобайтовые кодовые таблицы.  Тем не менее, для некоторых
	расширенных или многобайтовых кодировок есть неофициальные
	патчи, включающие их поддержку в <acronym>FFS</acronym>.
	Обращайтесь к сайтам по соответствующим языкам за дальнейшей
	информацией и патчами.</para>

      <indexterm><primary>DOS</primary></indexterm>
      <indexterm><primary>Unicode</primary></indexterm>
      <para>Файловая система &ms-dos; во &os; может быть настроена для
	поддержки перекодировки между &ms-dos;, кодовыми таблицами
	Unicode и выбранной кодовой таблицей &os;.  Обращайтесь к
	&man.mount.msdosfs.8; за подробностями.</para>
    </sect2>
-->
  </sect1>

  <sect1 xml:id="l10n-compiling">
    <title>Поиск приложений <acronym>i18n</acronym></title>

    <para><acronym>i18n</acronym> приложения пишутся с применением
      набора <acronym>i18n</acronym> в библиотеках.  Это позволяет
      разработчикам писать простые файлы и переводить отображаемые
      меню и надписи на любые языки.</para>

    <para>В <link
	xlink:href="&url.base;/ru/ports/index.html">Коллекции портов
	&os;</link> содержится множество приложений со встроенной
      поддержкой символов с расширенным и многобайтовым
      представлением для нескольких языков.  Чтобы упростить поиск
      таких приложений, в их названии содержится аббревиатура
      <literal>i18n</literal>.  Тем не менее, они не всегда
      поддерживают нужный язык.</para>

    <para>Некоторые приложения могут быть собраны с конкретной
      кодировкой.  Обычно это делается через
      <filename>Makefile</filename> порта или передачей параметра
      <application>configure</application>.  Для получения этой
      информации смотрите документацию <acronym>i18n</acronym>
      для соответствующего порта &os;.</para>
  </sect1>

  <sect1 xml:id="lang-setup">
    <title>Настройка локализации для некоторых языков</title>

    <para>В этом разделе приведены примеры локализации системы &os;
      на русский язык.  В завершение приводится дополнительная
      информация для локализации на другие языки.</para>

    <sect2 xml:id="ru-localize">
      <info>
	<title>Русский язык (кодировка KOI8-R)</title>

	<authorgroup>
	  <author><personname><firstname>Andrey</firstname><surname>Chernov</surname></personname><contrib>Первоначально предоставил </contrib></author>
	</authorgroup>
      </info>
      
      <indexterm>
	<primary>локализация</primary>
	<secondary>русский</secondary>
      </indexterm>

      <para>В этом разделе приведены настройки, специфичные для
	локализации системы &os; на русский язык.  Для более полного
	описания каждой из настроек обращайтесь к разделу
	<link linkend="using-localization">Использование
	  локализации</link>.</para>

      <para>Чтобы задать эту локаль для программной оболочки,
	добавьте в <filename>~/.login_conf</filename> каждого
	пользователя следующие строки:</para>

      <programlisting>me:My Account:\
	:charset=KOI8-R:\
	:lang=ru_RU.KOI8-R:</programlisting>

      <para>Чтобы настроить консоль, добавьте в
	<filename>/etc/rc.conf</filename> такие строки:</para>

      <programlisting>keymap="ru.koi8-r"
scrnmap="koi8-r2cp866"
font8x16="cp866b-8x16"
font8x14="cp866-8x14"
font8x8="cp866-8x8"
mousechar_start=3</programlisting>

      <para>Для каждой записи <literal>ttyv</literal> в
	<filename>/etc/ttys</filename> используйте
	<literal>cons25r</literal> в качестве типа терминала.</para>

      <indexterm><primary>принтеры</primary></indexterm>
      <para>Чтобы настроить печать, требуется специальный выходной
	фильтр для перекодировки из KOI8-R в CP866, поскольку
	большинство принтеров для России поставляются с аппаратной
	кодовой страницей CP866.  Для этой цели в состав &os;
	включён фильтр по умолчанию
	<filename>/usr/libexec/lpr/ru/koi2alt</filename>.  Для его
	использования добавьте в <filename>/etc/printcap</filename>
	такую запись:</para>

      <programlisting>lp|Russian local line printer:\
	:sh:of=/usr/libexec/lpr/ru/koi2alt:\
	:lp=/dev/lpt0:sd=/var/spool/output/lpd:lf=/var/log/lpd-errs:</programlisting>

      <para>Обратитесь к &man.printcap.5; за более подробным
	разъяснением.</para>

      <para>Чтобы настроить поддержку русских названий имён файлов
	при монтировании файловых систем &ms-dos;, включите в
	добавляемую в <filename>/etc/fstab</filename> запись
	<option>-L</option> с названием локали:</para>

      <programlisting>/dev/ad0s2      /dos/c  msdos   rw,-Lru_RU.KOI8-R 0 0</programlisting>

      <para>За дополнительной информацией обращайтесь к странице
	справочника &man.mount.msdosfs.8;.</para>

      <para>Чтобы настроить русские шрифты в
	<application>&xorg;</application>, установите пакет
	<package>x11-fonts/xorg-fonts-cyrillic</package>.  Затем
	проверьте раздел <literal>"Files"</literal> в
	<filename>/etc/X11/xorg.conf</filename>.
	<emphasis>Перед</emphasis> всеми записями
	<literal>FontPath</literal> должна быть добавлена
	следующая строка:</para>

      <programlisting>FontPath   "/usr/local/lib/X11/fonts/cyrillic"</programlisting>

      <para>Дополнительные кириллические шрифты доступны в Коллекции
	Портов.</para>

      <para>Для настройки ввода на русском языке добавьте следующие
	строки в <filename>/etc/xorg.conf</filename>, раздел
	<literal>"Keyboard"</literal>:</para>

      <programlisting>Option "XkbLayout"   "us,ru"
Option "XkbOptions"  "grp:toggle"</programlisting>

      <para>Убедитесь, что в этом файле закомментирован
	<literal>XkbDisable</literal>.</para>

      <para>Для <literal>grp:toggle</literal> используйте
	<keycap>Right Alt</keycap>, для
	<literal>grp:ctrl_shift_toggle</literal> - <keycombo
	  action="simul"><keycap>Ctrl</keycap><keycap>Shift</keycap></keycombo>.
	Для <literal>grp:caps_toggle</literal> используйте
	<keycap>CapsLock</keycap>.  Прежняя функция
	<keycap>CapsLock</keycap> всё ещё доступна в режиме LAT
	с использованием <keycombo
	  action="simul"><keycap>Shift</keycap><keycap>CapsLock</keycap></keycombo>.
	<literal>grp:caps_toggle</literal> по неустановленной
	причине не работает в
	<application>&xorg;</application>.</para>

      <para>Если на клавиатуре есть клавиши <quote>&windows;</quote>
	и некоторые неалфавитные клавиши работают неправильно,
	добавьте в <filename>/etc/xorg.conf</filename> следующую
	строку:</para>

      <programlisting>Option "XkbVariant" ",winkeys"</programlisting>

      <note>
	<para>Ввод с клавиатуры XKB на русском может не работать
	  с нелокализованными приложениями.  Минимально локализованные
	  приложения должны в начале программы вызывать функцию
	  <function>XtSetLanguageProc
	    (NULL, NULL, NULL);</function>.</para>
      </note>

      <para>За дальнейшими инструкциями по локализации приложений
	<application>Xorg</application> обращайтесь к странице <uri
	  xlink:href="http://koi8.pp.ru/xwin.html">http://koi8.pp.ru/xwin.html</uri>.
	Для получения более общей информации по KOI8-R смотрите <uri
	  xlink:href="http://koi8.pp.ru/">http://koi8.pp.ru/</uri>.</para>
    </sect2>

    <sect2>
      <title>Информация для других языков</title>

      <para>В этом разделе приводится дополнительная информация по
	настройке других локалей.</para>

      <indexterm>
	<primary>локализация</primary>
	<secondary>традиционный китайский</secondary>
      </indexterm>
      <indexterm>
	<primary>локализация</primary>
	<secondary>немецкий</secondary>
      </indexterm> 
      <indexterm>
	<primary>локализация</primary>
	<secondary>греческий</secondary>
      </indexterm>
      <indexterm>
	<primary>локализация</primary>
	<secondary>японский</secondary>
      </indexterm>
      <indexterm>
	<primary>локализация</primary>
	<secondary>корейский</secondary>
      </indexterm>

      <variablelist>
	<varlistentry>
	  <term>Традиционный китайский для Тайваня</term>

	  <listitem>
	    <para>У проекта &os;-Taiwan есть <uri
		xlink:href="http://netlab.cse.yzu.edu.tw/~statue/freebsd/zh-tut/">&os; Chinese HOWTO</uri>.</para>
	  </listitem>
	</varlistentry>

	<varlistentry>
	  <term>Локализация на греческий язык</term>

	  <listitem>
	    <para>Исчерпывающая статья по поддержке греческого во
	      &os; есть в официальной греческой документации <link
		xlink:href="&url.doc.base;/el_GR.ISO8859-7/articles/greek-language-support/index.html">здесь</link>.</para>
	  </listitem>
	</varlistentry>

	<varlistentry>
	  <term>Локализация на японский и корейский языки</term>

	  <listitem>
	    <para>Для японского обратитесь к <uri
		xlink:href="http://www.jp.FreeBSD.org/">http://www.jp.FreeBSD.org/</uri>,
	      а для корейского к <uri
		xlink:href="http://www.kr.FreeBSD.org/">http://www.kr.FreeBSD.org/</uri>.</para>
	  </listitem>
	</varlistentry>

	<varlistentry>
	  <term>Неанглоязычная документация &os;</term>

	  <listitem>
	    <para>Контрибьюторы &os; перевели отдельные части
	      документации &os; на другие языки.  Эти переводы
	      доступны по ссылкам на <link
		xlink:href="&url.base;/index.html">сайте &os;</link>
	      или из каталога
	      <filename>/usr/share/doc</filename>.</para>
	  </listitem>
	</varlistentry>
      </variablelist>
    </sect2>
  </sect1>
</chapter>

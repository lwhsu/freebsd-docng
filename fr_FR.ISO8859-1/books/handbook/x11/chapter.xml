<?xml version="1.0" encoding="iso-8859-1"?>
<!--
     The FreeBSD Documentation Project
     The FreeBSD French Documentation Project

     $FreeBSD$
     Original revision: 1.189
-->
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" version="5.0" xml:id="x11">
  <!--
    <authorgroup>
      <author>
	<firstname>Ken</firstname>
	<surname>Tom</surname>
	<contrib>Mis &agrave; jour pour le serveur X11 d'X.Org par </contrib>
      </author>
      <author>
	<firstname>Marc</firstname>
	<surname>Fonvieille</surname>
      </author>
    </authorgroup>
  </info>
  -->
  
  <title>Le système X Window</title>
  
  &trans.a.fonvieille;

  <sect1 xml:id="x11-synopsis">
    <title>Synopsis</title>

    <para>Une installation de &os; à l'aide de
      <application>bsdinstall</application> n'installe pas
      automatiquement d'interface graphique.  Ce chapitre décrit
      comment installer et configurer
      <application>&xorg;</application>, qui implémente une version
      libre du système X Window qui est utilisé pour fournir un
      environnement graphique.  Il décrit ensuite comme trouver et
      installer un environnement de bureau ou un gestionnaire de
      fenêtres.</para>

    <note>
      <para>Les utilisateurs préférant une méthode d'installation qui
	configure automatiquement <application>&xorg;</application>
	devraient à <link
	  xlink:href="https://ghostbsd.org">GhostBSD</link>, <link
	  xlink:href="https://www.midnightbsd.org">MidnightBSD</link>
	or <link
	  xlink:href="https://nomadbsd.org/">NomadBSD</link>.</para>
    </note>

    <para>Pour plus d'informations sur le matériel vidéo
      supporté par <application>&xorg;</application>, consultez le
      site Web <link
	xlink:href="http://www.x.org/">x.org</link>.</para>

    <para>Après la lecture de ce chapitre, vous connaîtrez:</para>
    <itemizedlist>
      <listitem>
	<para>Les divers composants du système X Window et comment ils
	  fonctionnent ensemble.</para>
      </listitem>

      <listitem><para>Comment installer et configurer
	<application>&xorg;</application>.</para>
      </listitem>

      <listitem>
	<para>Comment installer et configurer différents
	  gestionnaires de fenêtres et environnements de bureau.</para>
	</listitem>

      <listitem><para>Comment utiliser les polices de caractères
	&truetype; sous <application>&xorg;</application>.</para>
      </listitem>

      <listitem><para>Comment configurer votre système pour
	l'utilisation de procédures de connexions graphiques
	(<application>XDM</application>).</para></listitem>
    </itemizedlist>

    <para>Avant de lire ce chapitre, vous devrez:</para>

    <itemizedlist>
      <listitem><para>Savoir comment installer des logiciels tiers
	comme décrit dans le <xref linkend="ports"/>.</para>
      </listitem>
    </itemizedlist>
  </sect1>

  <sect1 xml:id="x-understanding">
    <title>Terminologie</title>

    <para>Alors qu'il n'est pas nécessaire de comprendre tout le détail
      des divers composants du système X Window, ni comment ils
      interagissent entre eux, une certaine connaissance de base de
      ces composants peut être utile.</para>

    <variablelist>
      <varlistentry>
	<term>Le serveur X</term>

	<listitem>
	  <para>X a été conçu dès le départ centré autour du réseau,
	    et adopte un modèle <quote>client-serveur</quote>.  Dans
	    ce modèle, le <quote>serveur X</quote> tourne sur
	    l'ordinateur sur lequel sont branchés le clavier, le
	    moniteur et la souris.  Le serveur est responsable de
	    tâches telles que la gestion de l'affichage, des entrées
	    en provenance du clavier et de la souris, et les entrées
	    ou sorties d'autres périphériques comme une tablette ou un
	    vidéo-projecteur.  Cela jette le trouble chez certaines
	    personnes, parce que la terminologie X est exactement le
	    contraire de ce à quoi ils s'attendent.  Ils s'attendent à
	    ce que le <quote>serveur X</quote> soit la grosse machine
	    puissante au fond du couloir, et que le <quote>client
	    X</quote> soit a machine sur leur bureau.</para>
	</listitem>
      </varlistentry>

      <varlistentry>
	<term>Le client X</term>

	<listitem>
	  <para>Chaque application X, comme
	    <application>XTerm</application> ou
	    <application>Firefox</application> est un
	    <quote>client</quote>.  Un client envoie des messages au
	    serveur comme <quote>Dessine une fenêtre aux coordonnées
	    suivantes</quote>, et le serveur renvoie au client des
	    messages du type <quote>L'utilisateur vient de cliquer sur
	    le bouton OK</quote>.</para>

	  <para>A la maison ou dans un petit bureau, le serveur X et
	    les clients X tourneront en général sur le même
	    ordinateur.  Il est également possible de faire tourner le
	    serveur X sur un ordinateur moins puissant et d'exécuter
	    les applications X sur un système plus puissant.  Dans ce
	    scénario, la communication entre le client X et le serveur
	    se fera par l'intermédiaire du réseau.</para>
	</listitem>
      </varlistentry>

      <varlistentry>
	<term>Le gestionnaire de fenêtres</term>

	<listitem>
	  <para>X n'essaye pas de dicter quel aspect doivent avoir les
	    fenêtres à l'écran, comment les déplacer avec la souris,
	    quelles combinaisons de touches devraient être utilisées
	    pour passer de l'une à l'autre, comment devraient être les
	    barres de titres de chaque fenêtre, etc.  Au lieu de cela,
	    X délègue cette responsabilité à une application séparée,
	    le gestionnaire de fenêtres (<quote>window
	    manager</quote>).  Il existe des <link
	      xlink:href="http://www.xwinman.org/">douzaines de
	    gestionnaires de fenêtres</link> disponibles.  Chaque
	    gestionnaire de fenêtres propose une apparence et une
	    prise en mains différentes: certains supportent les bureaux
	    virtuels, d'autres permettent de personnaliser les
	    combinaisons de touches pour la gestion du bureau,
	    certains ont un bouton <quote>Démarrer</quote>, et
	    certains permettent d'utiliser des thèmes, pour un
	    changement complet d'apparence et de prise en main du
	    bureau.  Les gestionnaires de fenêtres sont disponibles
	    dans la catégorie <filename>x11-wm</filename> du catalogue
	    des logiciels portés.</para>

	  <para>Chaque gestionnaire de fenêtre utilise un mécanisme de
	    configuration propre.  Certains demandent un fichier de
	    configuration écrit à la main, alors que d'autres
	    disposent d'outils graphiques pour la plupart des tâches
	    de configuration.</para>
	</listitem>
      </varlistentry>

      <varlistentry>
	<term>Environnement de bureau</term>

	<listitem>
	  <para><application>KDE</application> et
	    <application>GNOME</application> sont considérés comme des
	    environnements de bureau car ils intègrent une suite
	    complète d'applications pour effectuer les tâches
	    classiques d'un bureau informatique.  Ils peuvent disposer
	    de suites bureautiques, de navigateurs Web, ou encore de
	    jeux.</para>
	</listitem>
      </varlistentry>

      <varlistentry>
	<term>Politique de focus</term>

	<listitem>
	  <para>Le gestionnaire de fenêtres est responsable de la
	    politique ou stratégie de focus de la souris.  Cette
	    politique offre plusieurs méthodes pour choisir quelle
	    fenêtre doit recevoir les frappes au clavier et comment
	    indiquer visuellement la fenêtre actuellement
	    active.</para>

	  <para>Une des politiques de focus est appelée
	    <quote>click-to-focus</quote> (<quote>cliquer pour obtenir
	    le focus</quote>).  Dans ce mode, une fenêtre devient
	    active quand elle reçoit un clic de la souris.  Dans le
	    mode <quote>focus-follows-mouse</quote> (<quote>le focus
	    suit la souris</quote>), la fenêtre qui est sous le
	    pointeur de la souris est la fenêtre qui a le focus et le
	    focus est modifié en pointant sur une autre fenêtre.  Si
	    la souris est sur la fenêtre racine (ou fond d'écran),
	    alors cette fenêtre a le focus.  Dans le mode
	    <quote>sloppy-focus</quote> (<quote>focus
	    relâché</quote>), si la souris est déplacée sur la fenêtre
	    racine, la dernière fenêtre à avoir eu le focus le
	    conserve.  Avec le mode focus relâché, le focus n'est
	    modifié que si le pointeur passe sur une nouvelle fenêtre,
	    et non pas quand il quitte la fenêtre actuelle.  Dans la
	    politique <quote>click-to-focus</quote>, la fenêtre active
	    est sélectionnée par un clic de la souris.  La fenêtre
	    peut être remontée au premier plan au-dessus des autres
	    fenêtres.  Toutes les frappes au clavier seront désormais
	    dirigées vers cette fenêtre, même si le curseur est
	    déplacé vers une autre fenêtre.</para>

	  <para>Les différents gestionnaires de fenêtres supportent
	    différents modes pour le focus.  Tous supportent le clic
	    pour obtenir le focus, et une grande majorité supporte
	    également d'autres politiques.  Consultez la documentation
	    du gestionnaire de fenêtres pour déterminer quels modes
	    sont disponibles.</para>
	</listitem>
      </varlistentry>

      <varlistentry>
	<term>widgets - Eléments graphiques</term>

	<listitem>
	  <para>Widget est un terme pour désigner tous les éléments de
	    l'interface utilisateur qui peuvent être cliqués ou
	    manipulés d'une façon ou d'une autre.  Cela comprend les
	    boutons, les boîtes à cocher, les boutons radio, les
	    icônes et les listes.  Une boîte à outils de widgets est
	    un ensemble d'éléments graphiques utilisés afin de créer
	    des applications graphiques.  Il existe de nombreuses
	    boîtes à outils d'éléments graphiques populaires comme Qt,
	    utilisée par <application>KDE</application>, et GTK+,
	    utilisée par <application>GNOME</application>.  Cela aura
	    pour conséquence pour les applications de présenter une
	    apparence et une prise en main différente en fonction de
	    la famille d'éléments graphiques utilisée pour créer ces
	    applications.</para>
	</listitem>
      </varlistentry>
    </variablelist>
  </sect1>

  <sect1 xml:id="x-install">
    <title>Installer X11</title>

    <para>Sous &os;, <application>&xorg;</application> peut être
      installé à l'aide soit d'un paquet précompilé soit d'un logiciel
      porté.</para>

    <para>Le paquet pré-compilé peut être installé rapidement mais avec
      moins d'options de personnalisation:</para>

    <screen>&prompt.root; <userinput>pkg install xorg</userinput></screen>

    <para>Pour compiler et installer à partir du catalogue des logiciels
      portés:</para>

    <screen>&prompt.root; <userinput>cd /usr/ports/x11/xorg</userinput>
&prompt.root; <userinput>make install clean</userinput></screen>

    <para>Chacune de ces deux méthodes d'installation installera une
      version complète d'<application>&xorg;</application>.  La version
      en paquets pré-compilés reste la meilleure option pour la plupart
      des utilisateurs.</para>

    <para>Une plus petite version du système X adaptée aux utilisateurs
      expérimentés est disponible dans le paquet
      <package>x11/xorg-minimal</package>.  La plupart des
      documentations, des bibliothèques, et des applications ne sera pas
      installée.  Certaines applications ont besoin de ces composants
      additionnels pour fonctionner.</para>
  </sect1>

  <sect1 xml:id="x-config">
    <title>Configuration d'<application>&xorg;</application></title>

    <info>
      <authorgroup>
      <author>
	<personname>
	  <firstname>Warren</firstname>
	  <surname>Block</surname>
	</personname>
	<contrib>Contribution originale de </contrib>
      </author>
      </authorgroup>
    </info>

    <indexterm><primary>&xorg;</primary></indexterm>
    <indexterm><primary><application>&xorg;</application></primary></indexterm>

    <sect2 xml:id="x-config-quick-start">
      <title>Démarrage rapide</title>

      <para><application>&xorg;</application> supporte les cartes
	graphiques, les claviers et les périphériques de pointage les
	plus courants.</para>

      <tip>
	<para>Les cartes graphiques, moniteurs et périphériques
	  d'entrée sont détectés automatiquement.  Ne créez pas de
	  fichier <filename>xorg.conf</filename> ou n'utilisez pas
	  l'option <option>-configure</option> en dehors d'un échec de
	  la configuration automatique.</para>
      </tip>

      <procedure>
	<step>
	  <para>Si <application>&xorg;</application> a déjà été
	    utilisé sur cet ordinateur avant, déplacez ou supprimez
	    les fichiers existants:</para>

	  <screen>&prompt.root; <userinput>mv /etc/X11/xorg.conf ~/xorg.conf.etc</userinput>
&prompt.root; <userinput>mv /usr/local/etc/X11/xorg.conf ~/xorg.conf.localetc</userinput></screen>
	</step>

	<step>
	  <para>Ajouter au groupe <literal>video</literal> ou
	    <literal>wheel</literal> l'utilisateur qui exécutera
	    <application>&xorg;</application> pour activer
	    l'accélération 3D quand elle est disponible.  Pour ajouter
	    l'utilisateur <replaceable>jru</replaceable> aux groupes
	    disponibles:</para>

	  <screen>&prompt.root; <userinput>pw groupmod video -m <replaceable>jru</replaceable> || pw groupmod wheel -m <replaceable>jru</replaceable></userinput></screen>
	</step>

	<step>
	  <para>Le gestionnaire de fenêtres
	    <application>twm</application> est inclu par défaut.  Il
	    est lancé quand <application>&xorg;</application>
	    démarre:</para>

	  <screen>&prompt.user; <userinput>startx</userinput></screen>
	</step>

	<step>
	  <para>Sur certaines anciennes versions de &os;, la console
	    système doit être configurée en &man.vt.4; avant que le
	    retour à la console texte puisse correctement
	    fonctionner.  Consultez <xref
	    linkend="x-config-kms"/>.</para>
	</step>
      </procedure>
    </sect2>

    <sect2 xml:id="x-config-user-group">
      <title>Groupe utilisateur pour l'accélération graphique</title>

      <para>L'accès à <filename>/dev/dri</filename> est nécessaire
	pour autoriser l'accélération 3D sur les cartes graphiques.
	Il est en général plus simple d'ajouter l'utilisateur qui
	exécutera X soit au groupe <literal>video</literal> soit au
	groupe <literal>wheel</literal>.  Ici,  &man.pw.8; est utilisé
	pour ajouter l'utilisateur <replaceable>slurms</replaceable>
	au groupe <literal>video</literal>, ou au groupe
	<literal>wheel</literal> s'il n'y a pas de groupe
	<literal>video</literal>:</para>

      <screen>&prompt.root; <userinput>pw groupmod video -m <replaceable>slurms</replaceable> || pw groupmod wheel -m <replaceable>slurms</replaceable></userinput></screen>
    </sect2>

    <sect2 xml:id="x-config-kms">
      <title>Kernel Mode Setting (<acronym>KMS</acronym>)</title>

      <para>Quand l'ordinateur bascule de l'affichage sur la console
	vers une définition d'écran plus haute pour X, il doit fixer
	le <emphasis>mode</emphasis> de sortie graphique.  Les
	versions récentes de <acronym>&xorg;</acronym> utilisent un
	système présent dans le noyau pour effectuer ces changements
	de manière la plus efficace.  Les anciennes versions de &os;
	utilisent &man.sc.4; qui n'a pas connaissance du système
	<acronym>KMS</acronym>.  La conséquence est qu'après avoir
	fermé X, l'affichage de la console système sera vide même
	si elle reste fonctionnelle.  La nouvelle console &man.vt.4;
	évite ce problème.</para>

      <para>Ajoutez la ligne suivante au fichier
	<filename>/boot/loader.conf</filename> pour activer
	&man.vt.4;:</para>

      <programlisting>kern.vty=vt</programlisting>
    </sect2>

    <sect2 xml:id="x-config-files">
      <title>Fichiers de configuration</title>

      <para>Une configuration manuelle n'est généralement pas
	nécessaire.  Ne créez pas de fichiers de configuration à la
	main à moins que la configuration automatique ne fonctionne
	pas.</para>

      <sect3 xml:id="x-config-files-directory">
	<title>Répertoire</title>

	<para><application>&xorg;</application> recherche ses fichiers
	  de configuration dans plusieurs répertoires.
	  <filename>/usr/local/etc/X11/</filename> est le répertoire
	  recommandé pour ces fichiers sous &os;.  L'utilisation de ce
	  répertoire permet de conserver une séparation entre les
	  fichiers des applications et ceux du système
	  d'exploitation.</para>

	<para>Stocker les fichiers de configuration dans le répertoire
	  <filename>/etc/X11/</filename> originel fonctionne toujours.
	  Cependant, cela a pour conséquence de mélanger des fichiers
	  concernant des applications avec ceux du système de base
	  &os; et n'est pas recommandé.</para>
      </sect3>

      <sect3 xml:id="x-config-files-single-or-multi">
	<title>Un seul ou plusieurs fichiers</title>

	<para>Il est plus simple d'utiliser plusieurs fichiers qui
	  chacun individuellement s'occupe de la configuration d'un
	  paramètre précis plutôt qu'un seul fichier
	  <filename>xorg.conf</filename> traditionnel.  Ces fichiers
	  sont stockés dans le sous-répertoire
	  <filename>xorg.conf.d/</filename> du répertoire principal de
	  configuration.  Son chemin d'accès complet est en général
	  <filename>/usr/local/etc/X11/xorg.conf.d/</filename>.</para>

	<para>Des exemples de ces fichiers sont présentés plus bas
	  dans cette section.</para>

	<para>Le fichier unique traditionnel
	  <filename>xorg.conf</filename> fonctionne toujours mais
	  n'est ni clair ni aussi flexible que plusieurs fichiers dans
	  le sous-répertoire <filename>xorg.conf.d/</filename>.</para>
      </sect3>
    </sect2>

    <sect2 xml:id="x-config-video-cards">
      <title>Cartes graphiques</title>

      <para>En raison de changements effectués dans les versions
	récentes de &os;, il est désormais possible d'utiliser les
	pilotes de périphériques graphiques proposés dans le catalogue
	des logiciels portés ou sous forme pré-compilé.  Par
	conséquent, les utilisateurs peuvent utiliser un des pilotes
	disponibles à partir du logiciel
	<package>graphics/drm-kmod</package>.</para>

      <variablelist>
	<varlistentry xml:id="x-config-video-cards-ports">
	  <term>&i915kms;</term>
	  <term>&radeonkms;</term>
	  <term>&amdgpu;</term>

	  <listitem>
	    <para>L'accélération 2D et 3D sont supportées par la
	      plupart des cartes graphiques &i915kms; en provenance
	      d'Intel.</para>

	    <para>Nom du pilote: <literal>i915kms</literal></para>

	    <para>L'accélération 2D et 3D sont supportées par la
	      plupart des anciennes cartes graphiques &radeonkms; en
	      provenance d'AMD.</para>

	    <para>Nom du pilote: <literal>radeonkms</literal></para>

	    <para>L'accélération 2D et 3D sont supportées par la
	      plupart des nouvelles cartes graphiques &amdgpu; en
	      provenance d'AMD.</para>

	    <para>Nom du pilote: <literal>amdgpu</literal></para>

	    <para>Pour information, veuillez consulter <link
		xlink:href="https://en.wikipedia.org/wiki/List_of_Intel_graphics_processing_units"/>
	      ou <link
		xlink:href="https://en.wikipedia.org/wiki/List_of_AMD_graphics_processing_units"/>
	      pour une liste des GPUs supportés.</para>
	  </listitem>
	</varlistentry>

	<varlistentry xml:id="x-config-video-cards-intel">
	  <term>&intel;</term>

	  <listitem>
	    <para>L'accélération 3D est supportée sur la plupart des
	      cartes graphiques &intel; jusqu'au Ivy Bridge (HD
	      Graphics 2500, 4000, et P4000), y compris Iron Lake (HD
	      Graphics) et Sandy Bridge (HD Graphics 2000).</para>

	    <para>Nom du pilote: <literal>intel</literal></para>

	    <para>Pour information, consultez <link
		xlink:href="https://en.wikipedia.org/wiki/List_of_Intel_graphics_processing_units"/>.</para>
	  </listitem>
	</varlistentry>

	<varlistentry xml:id="x-config-video-cards-radeon">
	  <term>&amd; Radeon</term>

	  <listitem>
	    <para>L'accélération 2D et 3D sont supportées par les
	      cartes Radeon jusqu'à la série HD6000 comprise.</para>

	    <para>Nom du pilote: <literal>radeon</literal></para>

	    <para>Pour information, consultez <link
		xlink:href="https://en.wikipedia.org/wiki/List_of_AMD_graphics_processing_units"/>.</para>
	  </listitem>
	</varlistentry>

	<varlistentry xml:id="x-config-video-cards-nvidia">
	  <term>NVIDIA</term>

	  <listitem>
	    <para>Plusieurs pilotes NVIDIA sont disponibles dans la
	      catégorie <filename>x11</filename> du catalogue des
	      logiciels portés.  Installez le pilote correspondant à
	      la carte graphique.</para>

	    <para>Pour information, consultez <link
		xlink:href="https://en.wikipedia.org/wiki/List_of_Nvidia_graphics_processing_units"/>.</para>
	  </listitem>
	</varlistentry>

	<varlistentry xml:id="x-config-video-cards-hybrid">
	  <term>Configuration graphique hybride</term>

	  <listitem>
	    <para>Certains ordinateurs portables ont un processeur
	      graphique supplémentaire en plus de celui intégré dans
	      le chipset ou le microprocesseur.  Le système
	      <emphasis>Optimus</emphasis> combine du matériel &intel;
	      et NVIDIA.  Les <emphasis>systèmes graphiques
	      sélectionnables</emphasis> ou <emphasis>systèmes
	      graphiques hybrides</emphasis> sont la combinaison d'un
	      processeur &intel; ou &amd; et d'un
	      <acronym>GPU</acronym> &amd; Radeon.</para>

	    <para>L'implémentation de ces systèmes graphiques hybrides
	      varie, et <application>&xorg;</application> sous &os;
	      n'est pas en mesure de faire fonctionner toutes les
	      versions.</para>

	    <para>Certains ordinateurs fournissent une option du
	      <acronym>BIOS</acronym> pour désactiver une de ces
	      cartes graphiques ou pour sélectionner un mode
	      <emphasis>discret</emphasis> qui peut être utilisé avec
	      un des pilotes graphiques standard.  Par exemple, il est
	      parfois possible de désactiver le <acronym>GPU</acronym>
	      NVIDIA dans un système Optimus.  La partie graphique
	      &intel; peut alors être utilisée avec un pilote
	      &intel;.</para>

	    <para>Les paramètres du <acronym>BIOS</acronym> dépendent
	      du modèle d'ordinateur.  Dans certaines situations, les
	      deux <acronym>GPU</acronym> peuvent être laissés actifs,
	      mais la création d'un fichier de configuration utilisant
	      seulement le <acronym>GPU</acronym> principal dans la
	      partie <literal>Device</literal> est suffisant pour
	      qu'un tel système fonctionne.</para>
	  </listitem>
	</varlistentry>

	<varlistentry xml:id="x-config-video-cards-other">
	  <term>Autres cartes graphiques</term>

	  <listitem>
	    <para>Les pilotes pour les cartes graphiques moins
	      courantes peuvent être trouvés dans la catégorie
	      <filename>x11-drivers</filename> du catalogue des
	      logiciels portés.</para>

	    <para>Les cartes qui ne sont pas supportées par un pilote
	      précis pourront toujours être utilisables avec le pilote
	      <package>x11-drivers/xf86-video-vesa</package>.  Ce
	      pilote est installé par <package>x11/xorg</package>.  Il
	      peut également être installé manuellement en tant que
	      <package>x11-drivers/xf86-video-vesa</package>.
	      <application>&xorg;</application> tente d'utiliser ce
	      pilote quand un pilote spécifique à la carte graphique
	      n'est pas trouvé.</para>

	    <para><package>x11-drivers/xf86-video-scfb</package> est
	      un pilote graphique non-spécifique qui fonctionne sur de
	      nombreux ordinateurs <acronym>UEFI</acronym> et
	      &arm;.</para>
	  </listitem>
	</varlistentry>

	<varlistentry xml:id="x-config-video-cards-file">
	  <term>Configuration du pilote graphique dans un
	    fichier</term>

	  <listitem>
	    <para>Pour configurer le pilote &intel; dans un fichier de
	      configuration:</para>

	    <example xml:id="x-config-video-cards-file-intel">
	      <title>Sélection du pilote graphique &intel; à l'aide
		d'un fichier</title>

	      <para><filename>/usr/local/etc/X11/xorg.conf.d/driver-intel.conf</filename></para>

	      <programlisting>Section "Device"
	Identifier "Card0"
	Driver     "intel"
	# BusID    "PCI:1:0:0"
EndSection</programlisting>

	      <para>Si plus d'une carte graphique est présente,
		l'identifant <literal>BusID</literal> peut être
		décommenté et paramétré pour sélectionné la carte
		désirée.  Une liste des <acronym>ID</acronym>s des
		cartes graphiques peut être obtenu avec
		<command>pciconf -lv | grep -B3
		display</command>.</para>
	    </example>

	    <para>Pour configurer le pilote Radeon dans un fichier de
	      configuration:</para>

	    <example xml:id="x-config-video-cards-file-radeon">
	      <title>Sélection du pilote graphique Radeon à l'aide
		d'un fichier</title>

	      <para><filename>/usr/local/etc/X11/xorg.conf.d/driver-radeon.conf</filename></para>

	      <programlisting>Section "Device"
	Identifier "Card0"
	Driver     "radeon"
EndSection</programlisting>
	    </example>

	    <para>Pour configurer le pilote <acronym>VESA</acronym>
	      dans un fichier de configuration:</para>

	    <example xml:id="x-config-video-cards-file-vesa">

	      <title>Sélection du pilote graphique
		<acronym>VESA</acronym> à l'aide d'un fichier</title>

	      <para><filename>/usr/local/etc/X11/xorg.conf.d/driver-vesa.conf</filename></para>

	      <programlisting>Section "Device"
	Identifier "Card0"
	Driver     "vesa"
EndSection</programlisting>
	    </example>

	    <para>Pour configurer le pilote <literal>scfb</literal>
	      pour une utilisation avec un ordinateur
	      <acronym>UEFI</acronym> ou &arm;:</para>

	    <example xml:id="x-config-video-cards-file-scfb">
	      <title>Sélection du pilote graphique
		<literal>scfb</literal> à l'aide d'un fichier</title>

	      <para><filename>/usr/local/etc/X11/xorg.conf.d/driver-scfb.conf</filename></para>

	      <programlisting>Section "Device"
	Identifier "Card0"
	Driver     "scfb"
EndSection</programlisting>
	    </example>
	  </listitem>
	</varlistentry>
      </variablelist>
    </sect2>

    <sect2 xml:id="x-config-monitors">
      <title>Moniteurs</title>

      <para>Presque tous les moniteus supportent la norme
	<emphasis>Extended Display Identification Data</emphasis>
	(<acronym>EDID</acronym>).  <application>&xorg;</application>
	utilise <acronym>EDID</acronym> pour communiquer avec le
	moniteur et détecter les définitions et les taux de
	rafraichissement supportés.  Ensuite, il sélectionne la
	combinaison de paramètres la plus adaptée pour le
	moniteur.</para>

      <para>Les autres définitions supportées par le moniteur peuvent
	être sélectionnées en indiquant celle désirée dans les
	fichiers de configuration, ou à l'aide de &man.xrandr.1; après
	avoir lancé le serveur X.</para>

      <variablelist>
	<varlistentry xml:id="x-config-monitors-xrandr">
	  <term>Utilisation de &man.xrandr.1;</term>

	  <listitem>
	    <para>Exécutez &man.xrandr.1; sans aucun paramètre pour
	      voir la liste des sorties vidéos et des modes détectés
	      du moniteur:</para>

	    <screen>&prompt.user; <userinput>xrandr</userinput>
Screen 0: minimum 320 x 200, current 3000 x 1920, maximum 8192 x 8192
DVI-0 connected primary 1920x1200+1080+0 (normal left inverted right x axis y axis) 495mm x 310mm
   1920x1200     59.95*+
   1600x1200     60.00
   1280x1024     85.02    75.02    60.02
   1280x960      60.00
   1152x864      75.00
   1024x768      85.00    75.08    70.07    60.00
   832x624       74.55
   800x600       75.00    60.32
   640x480       75.00    60.00
   720x400       70.08
DisplayPort-0 disconnected (normal left inverted right x axis y axis)
HDMI-0 disconnected (normal left inverted right x axis y axis)</screen>

	    <para>Ceci montre que la sortie <literal>DVI-0</literal>
	      est utilisée actuellement pour afficher une définition
	      d'écran de 1920x1200 pixels à une fréquence de
	      rafraichissement d'environ 60 Hz.  Il n'y a pas de
	      moniteur branché aux connecteurs
	      <literal>DisplayPort-0</literal> et
	      <literal>HDMI-0</literal>.</para>

	    <para>N'importe quel autre mode d'affichage peut être
	      choisi avec &man.xrandr.1;.  Par exemple, pour basculer
	      sur 1280x1024 à 60 Hz:</para>

	    <screen>&prompt.user; <userinput>xrandr --mode 1280x1024 --rate 60</userinput></screen>

	    <para>Une opération courante est d'utiliser une sortie
	      vidéo externe sur un ordinateur portable pour un
	      vidéo-projecteur.</para>

	    <para>Le type et le nombre de connecteurs de sortie
	      varient en fonction des systèmes, et le nom donné à
	      chaque sortie varie d'un pilote graphique à l'autre.  Ce
	      qu'un pilote appelle <literal>HDMI-1</literal>, un autre
	      l'appellera <literal>HDMI1</literal>.  Aussi la première
	      chose à faire est de lancer &man.xrandr.1; pour lister
	      toutes les sorties disponibles.</para>

	    <screen>&prompt.user; <userinput>xrandr</userinput>
Screen 0: minimum 320 x 200, current 1366 x 768, maximum 8192 x 8192
LVDS1 connected 1366x768+0+0 (normal left inverted right x axis y axis) 344mm x 193mm
   1366x768      60.04*+
   1024x768      60.00
   800x600       60.32    56.25
   640x480       59.94
VGA1 connected (normal left inverted right x axis y axis)
   1280x1024     60.02 +  75.02
   1280x960      60.00
   1152x864      75.00
   1024x768      75.08    70.07    60.00
   832x624       74.55
   800x600       72.19    75.00    60.32    56.25
   640x480       75.00    72.81    66.67    60.00
   720x400       70.08
HDMI1 disconnected (normal left inverted right x axis y axis)
DP1 disconnected (normal left inverted right x axis y axis)</screen>

	    <para>Quatre sorties ont été trouvées: l'écran intégré
	      <literal>LVDS1</literal>, et les connecteurs externes
	      <literal>VGA1</literal>, <literal>HDMI1</literal>, et
	      <literal>DP1</literal>.</para>

	    <para>Le projecteur a été connecté à la sortie
	      <literal>VGA1</literal>.  &man.xrandr.1; est maintenant
	      utilisé pour régler cette sortie sur la définition
	      native de ce vidéo-projecteur et pour ajouter l'espace
	      d'affichage supplémentaire à droite du bureau:</para>

	    <screen>&prompt.user; <userinput>xrandr --output VGA1 --auto --right-of LVDS1</userinput></screen>

	    <para>Le paramètre <literal>--auto</literal> sélectionne la
	      définition et le taux de rafraichissement détecté par
	      <acronym>EDID</acronym>.  Si la définition n'est pas
	      correctement détectée, une valeur définie peut être donnée
	      avec le paramètre <literal>--mode</literal> à la place
	      de <literal>--auto</literal>.  Par exemple, la plupart
	      des vidéo-projecteurs acceptent une définition de
	      1024x768 qui est réglée avec <literal>--mode
	      1024x768</literal>.</para>

	    <para>&man.xrandr.1; est souvent exécuté à partir de
	      <filename>.xinitrc</filename>
	      pour régler le mode adapté quand X est lancé.</para>
	  </listitem>
	</varlistentry>

	<varlistentry xml:id="x-config-monitors-files">
	  <term>Configuration de la définition du moniteur dans un
	    fichier</term>

	  <listitem>
	    <para>Pour configurer la définition de l'écran à 1024x768
	      dans un fichier de configuration:</para>

	    <example>
	      <title>Sélection de la définition d'écran à l'aide d'un
		fichier</title>

	      <para><filename>/usr/local/etc/X11/xorg.conf.d/screen-resolution.conf</filename></para>

	      <programlisting>Section "Screen"
	Identifier "Screen0"
	Device     "Card0"
	SubSection "Display"
	Modes      "1024x768"
	EndSubSection
EndSection</programlisting>
	    </example>

	    <para>Les quelques moniteurs ne supportant pas
	      l'<acronym>EDID</acronym> peuvent être configurés en
	      paramétrant <literal>HorizSync</literal> et
	      <literal>VertRefresh</literal> avec les plages de
	      fréquences supportées par le moniteur.</para>

	    <example>
	      <title>Configuration manuelle des fréquences du
		moniteur</title>

	      <para><filename>/usr/local/etc/X11/xorg.conf.d/monitor0-freq.conf</filename></para>

	      <programlisting>Section "Monitor"
	Identifier   "Monitor0"
	HorizSync    30-83   # kHz
	VertRefresh  50-76   # Hz
EndSection</programlisting>
	    </example>
	  </listitem>
	</varlistentry>
      </variablelist>
    </sect2>

    <sect2 xml:id="x-config-input">
      <title>Périphériques d'entrée</title>

      <sect3 xml:id="x-config-input-keyboard">
	<title>Claviers</title>

	<variablelist>
	  <varlistentry xml:id="x-config-input-keyboard-layout">
	    <term>Disposition des touches de clavier</term>

	    <listitem>
	      <para>L'emplacement normalisé des touches d'un clavier
		est appelé <emphasis>disposition</emphasis>
		(<emphasis>layout</emphasis>).  Les dispositions et
		d'autres paramètres réglables sont listés dans la page
		de manuel &man.xkeyboard-config.7;.</para>

	      <para>Une disposition des touches américaine est celle
		utilisée par défaut.  Pour sélectionner une
		disposition différente, configurez les options
		<literal>XkbLayout</literal> et
		<literal>XkbVariant</literal> dans une section
		<literal>InputClass</literal>.  Cette configuration
		sera appliquée à tous les périphériques d'entrée qui
		correspondent à cette classe.</para>

	      <para>Cet exemple sélectionne une disposition de
		touches française.</para>

	      <example>
		<title>Configuration d'une disposition des touches de
		  clavier</title>

		<para><filename>/usr/local/etc/X11/xorg.conf.d/keyboard-fr.conf</filename></para>

		<programlisting>Section	"InputClass"
	Identifier	"KeyboardDefaults"
	MatchIsKeyboard	"on"
	Option		"XkbLayout" "fr"
EndSection</programlisting>
	      </example>

	      <example>
		<title>Configuration de plusieurs dispositions des
		  touches</title>

		<para>Configuration des dispositions américaine,
		  espagnole et ukrainienne.  Le passage de l'une à
		  l'autre de ces dispositions se fait en appuyant sur
		  <keycombo action="simul">
		    <keycap>Alt</keycap>
		    <keycap>Shift</keycap>
		  </keycombo>.  <package>x11/xxkb</package> ou
		  <package>x11/sbxkb</package> peuvent être utilisés
		  pour un contrôle de la sélection de la disposition
		  des touches amélioré et pour avoir des indicateurs
		  de la disposition en cours d'utilisation.</para>


		<para><filename>/usr/local/etc/X11/xorg.conf.d/kbd-layout-multi.conf</filename></para>

		<programlisting>Section	"InputClass"
	Identifier	"All Keyboards"
	MatchIsKeyboard	"yes"
	Option		"XkbLayout" "us, es, ua"
EndSection</programlisting>
	      </example>
	    </listitem>
	  </varlistentry>

	  <varlistentry xml:id="x-config-input-keyboard-zap">
	    <term>Quitter <application>&xorg;</application> à
	      partir du clavier</term>

	    <listitem>
	      <para>X peut être fermé à partir d'une combinaison de
		touches.  Par défaut, cette combinaison n'est pas
		définie car elle entre en conflit avec les commandes
		passées au clavier pour certaines applications.
		L'activation de cette option nécessite d'effectuer des
		modifications à la section
		<literal>InputDevice</literal> du clavier:</para>

	      <example>
		<title>Activation de la sortie d'X à l'aide du
		  clavier</title>

		<para><filename>/usr/local/etc/X11/xorg.conf.d/keyboard-zap.conf</filename></para>

		<programlisting>Section	"InputClass"
	Identifier	"KeyboardDefaults"
	MatchIsKeyboard	"on"
	Option		"XkbOptions" "terminate:ctrl_alt_bksp"
EndSection</programlisting>
	      </example>
	    </listitem>
	  </varlistentry>
	</variablelist>
      </sect3>

      <sect3 xml:id="x11-input-mice">
	<title>Souris et périphériques de pointage</title>

	<important>
	  <para>Si vous utilisez <package>xorg-server</package>&nbsp;1.20.8
	    ou les versions suivantes sous &os;&nbsp;&rel121.current;
	    et que vous n'utilisez pas &man.moused.8;, ajoutez la
	    ligne <userinput>kern.evdev.rcpt_mask=12</userinput> au
	    fichier <filename>/etc/sysctl.conf</filename>.</para>
	</important>

	<para>Plusieurs paramètres de la souris peuvent être réglés
	  avec les options de configuration.  Consultez la page de
	  manuel &man.mousedrv.4x; pour une liste complète.</para>

	<variablelist>
	  <varlistentry xml:id="x11-input-mice-buttons">
	    <term>Butons de la souris</term>

	    <listitem>
	      <para>Le nombre de boutons d'une souris peut être
		configuré dans la section
		<literal>InputDevice</literal> du fichier
		<filename>xorg.conf</filename>.  Pour fixer le nombre
		de boutons à 7:</para>

	      <example>
		<title>Réglage du nombre de boutons de la
		  souris</title>

		<para><filename>/usr/local/etc/X11/xorg.conf.d/mouse0-buttons.conf</filename></para>

		<programlisting>Section "InputDevice"
	Identifier  "Mouse0"
	Option      "Buttons" "7"
EndSection</programlisting>
	      </example>
	    </listitem>
	  </varlistentry>
	</variablelist>
      </sect3>
    </sect2>

    <sect2 xml:id="x-config-manual-configuration">
      <title>Configuration manuelle</title>

      <para>Dans certains cas, la configuration automatique
	d'<application>&xorg;</application> ne fonctionne pas avec un
	matériel spécifique, ou une configuration différente est
	recherchée.  Pour ces cas, un fichier de configuration
	personnalisé peut être créé.</para>

      <warning>
	<para>Ne créez pas de fichiers de configuration à la main à
	  moins que cela ne soit nécessaire.  Une configuration
	  inadaptée peut empêcher un fonctionnement correct.</para>
      </warning>

      <para>Un fichier de configuration basé sur le matériel détecté
	peut être généré par <application>&xorg;</application>.  Ce
	fichier est un point de départ utile pour une configuration
	personnalisée.</para>

      <para>Génération d'un fichier
	<filename>xorg.conf</filename>:</para>

      <screen>&prompt.root; <userinput>Xorg -configure</userinput></screen>

      <para>Le fichier de configuration est enregistré sous
	<filename>/root/xorg.conf.new</filename>.
	Effectuez les modifications désirées, puis tester ce fichier
	(avec l'option <option>-retro</option> de manière à avoir un
	fond d'écran visible) avec:</para>

      <screen>&prompt.root; <userinput>Xorg -retro -config /root/xorg.conf.new</userinput></screen>

      <para>Une fois que la nouvelle configuration a été ajustée et testée,
	elle peut être divisée en plus petits fichiers dans les
	emplacements habituels,
	<filename>/usr/local/etc/X11/xorg.conf.d/</filename>.</para>
    </sect2>
  </sect1>

  <sect1 xml:id="x-fonts">
    <!--
    <sect1info>
      <authorgroup>
	<author>
	  <firstname>Murray</firstname>
	  <surname>Stokely</surname>
	  <contrib>Contribution de </contrib>
	</author>
      </authorgroup>
    </sect1info>
    -->
    <title>Utilisation des polices de caractères sous
      <application>&xorg;</application></title>

    <sect2 xml:id="type1">
    <title>Polices de caractères Type1</title>
    <para>Les polices de caractères livrées par
      défaut avec <application>&xorg;</application> sont loin
      d'être idéales pour des applications de type publication.
      Les grandes polices utilisées pour les présentations
      présentent un aspect en escalier et peu professionnel, et
      les petites polices sont
      presque complètement
      illisibles.  Cependant, il existe de nombreuses polices
      Type1 (&postscript;) gratuites, de hautes qualités qui peuvent
      être aisément utilisées avec
      <application>&xorg;</application>..  Par exemple, la collection de polices de caractères
      URW  (<package>x11-fonts/urwfonts</package>)
      comprend une version haute qualité des polices de
      caractères standards type1 (<trademark class="registered">Times Roman</trademark>, <trademark class="registered">Helvetica</trademark>, <trademark class="registered">Palatino</trademark>
      et autres).  La collection Freefonts (<package>x11-fonts/freefonts</package>) comprend beaucoup
      plus de polices de caractères, mais la plupart d'entre elles sont
      destinées &agrave; être utilisées avec des logiciels
      graphiques comme <application>Gimp</application>, et ne sont pas
      suffisamment complètes pour servir de polices
      de caractères d'affichage.  De plus
      <application>&xorg;</application> peut être configuré
      pour utiliser les polices de caractères &truetype; avec un minimum
      d'effort.  Pour plus de détails &agrave; ce sujet,
      consultez la page de manuel &man.X.7; ou la section
      <xref linkend="truetype"/>.</para>

    <para>Pour installer les collections de polices de caractères
      Type1 précédentes à partir des paquets binaires,
      lancez les commandes suivantes:</para>

      <screen>&prompt.root; <userinput>pkg install urwfonts</userinput></screen>

      <para>Pour les compiler à partir du catalogue des logiciels
	portés, lancez les commandes suivantes:</para>

      <screen>&prompt.root; <userinput>cd /usr/ports/x11-fonts/urwfonts</userinput>
&prompt.root; <userinput>make install clean</userinput></screen>

    <para>Et de même pour la collection Freefont ou d'autres.  Pour
      que le serveur X détecte ces polices, ajoutez une
      ligne appropriée au fichier de configuration du serveur X
      (<filename>/etc/X11/xorg.conf</filename>),
      du type:</para>

    <programlisting>FontPath "/usr/local/share/fonts/URW/"</programlisting>

      <para>Autre possibilité, en ligne de commande dans une session X
	lancez:</para>

      <screen>&prompt.user; <userinput>xset fp+ /usr/local/share/fonts/urwfonts</userinput>
&prompt.user; <userinput>xset fp rehash</userinput></screen>

      <para>Cela fonctionnera mais la configuration sera perdue quand la
	session X sera fermée, &agrave; moins de l'ajouter dans le
	fichier de
	démarrage (<filename>~/.xinitrc</filename> pour une session
	<command>startx</command> classique, ou dans
	<filename>~/.xsession</filename> quand on s'attache au système
	par l'intermédiaire d'un gestionnaire de session graphique comme
	<application>XDM</application>).  Une troisième méthode
	est d'utiliser le nouveau fichier <filename>/usr/local/etc/fonts/local.conf</filename>:
	comme montré dans la section <xref linkend="antialias"/>.</para>
    </sect2>

    <sect2 xml:id="truetype">
    <title>Polices de caractères &truetype;</title>

    <indexterm><primary>TrueType Fonts</primary></indexterm>
    <indexterm><primary>fonts</primary>
      <secondary>TrueType</secondary>
    </indexterm>

    <para><application>&xorg;</application> dispose d'un support
      intégré pour le rendu des polices &truetype;.
      Il y a deux différents modules qui peuvent activer cette
      fonctionnalité.  Le module freetype est
      utilisé dans cet exemple parce qu'il est plus compatible avec les
      autres moteurs de rendu des polices de caractères.  Pour activer
      le module freetype ajoutez juste la ligne suivante dans la section
      <literal>"Module"</literal> du fichier
      <filename>/etc/X11/xorg.conf</filename>.</para>

    <programlisting>Load  "freetype"</programlisting>

    <para>Maintenant créez un répertoire pour les polices
      &truetype; (par exemple
      <filename>/usr/local/share/fonts/TrueType</filename>) et copiez
      toutes les polices &truetype; dans ce répertoire.  Gardez &agrave;
      l'esprit
      que les polices &truetype; ne peuvent être directement prises d'un
      &apple; &mac;; elles doivent être dans un format &unix;/&ms-dos;/&windows; pour
      être utilisées sous <application>&xorg;</application>.
      Une fois les fichiers copiés dans ce répertoire, utilisez
      <application>mkfontscale</application> pour créer un fichier
      <filename>fonts.dir</filename>, de façon &agrave; ce que le moteur
      d'affichage des polices d'X sache que de nouveaux fichiers ont
      été
      installés.  <application>mkfontscale</application> peut être installé
      à partir d'un paquet binaire:</para>

      <screen>&prompt.root; <userinput>pkg install mkfontscale</userinput></screen>

      <para>Puis créez un index des polices de caractères pour X dans
	le répertoire:</para>

      <screen>&prompt.root; <userinput>cd /usr/local/share/fonts/TrueType</userinput>
&prompt.root; <userinput>mkfontscale</userinput></screen>

    <para>Maintenant ajoutez le répertoire des polices &truetype; au
      chemin des polices de caractères.  Cela est identique &agrave;
      ce qui est décrit dans la section <xref linkend="type1"/>:</para>

    <screen>&prompt.user; <userinput>xset fp+ /usr/local/share/fonts/TrueType</userinput>
&prompt.user; <userinput>xset fp rehash</userinput></screen>

      <para>ou ajouter une ligne <literal>FontPath</literal> au fichier
	<filename>xorg.conf</filename>.</para>

      <para>Désormais <application>Gimp</application>,
	<application>LibreOffice</application>,
	et toutes les autres
	applications X devraient maintenant reconnaître les polices de
	caractères &truetype; installées.  Les polices très petites (comme
	le texte de page web visualisé sur un écran haute
	résolution) et les très
	grandes polices (dans <application>LibreOffice</application>)
	auront un rendu bien meilleur maintenant.</para>
    </sect2>

    <sect2 xml:id="antialias">
      <!--
      <sect2info>
	<authorgroup>
	  <author>
	    <firstname>Joe Marcus</firstname>
	    <surname>Clarke</surname>
	    <contrib>Mias à jour en Mai 2003 par</contrib>
	  </author>
	</authorgroup>
      </sect2info>
      -->
      <title>Polices de caractères anticrénelage</title>
      

      <indexterm><primary>polices de caractères
	anticrénelage</primary></indexterm>
      <indexterm><primary>polices de caractères</primary>
	<secondary>anticrénelage</secondary></indexterm>

      <para>Toutes les polices de caractères sous <application>&xorg;</application>
	se trouvant dans les répertoires <filename>/usr/local/share/fonts/</filename> et
	<filename>~/.fonts/</filename> sont
	automatiquement disponibles pour l'anticrénelage avec
	les applications compatibles Xft.  La plupart des application
	sont compatibles Xft, comme <application>KDE</application>,
	<application>GNOME</application>, et
	<application>Firefox</application>.</para>

      <para>Afin de contrôler quelles polices de
	caractères sont anticrénelées, ou pour
	configurer les propriétés de
	l'anticrénelage, créez (ou éditez, s'il
	existe déj&agrave;) le fichier
	<filename>/usr/local/etc/fonts/local.conf</filename>.
	Plusieurs caractéristiques avancées du
	système de fontes Xft peuvent être
	ajustées par l'intermédiaire de ce fichier;
	cette section ne décrit que des possibilités
	simples.  Pour plus de détails, consultez la page de
	manuel &man.fonts-conf.5;.</para>

      <indexterm><primary>XML</primary></indexterm>

      <para>Ce fichier doit être dans le format XML.  Faites
	attention &agrave; la casse des caractères, et
	assurez-vous que toutes les balises sont correctement
	fermées.  Le fichier débute avec l'entête
	XML classique suivie par une définition DOCTYPE, puis
	de la balise <literal>&lt;fontconfig&gt;</literal>:</para>

      <programlisting>
	&lt;?xml version="1.0"?&gt;
	&lt;!DOCTYPE fontconfig SYSTEM "fonts.dtd"&gt;
	&lt;fontconfig&gt;
      </programlisting>

      <para>Comme précisé précédemment,
	l'ensemble des polices de caractères du
	répertoire <filename>/usr/local/share/fonts/</filename> comme du
	répertoire <filename>~/.fonts/</filename> sont disponibles pour
	les applications compatibles Xft.  Si vous désirez
	ajouter un autre répertoire en dehors des ces deux
	l&agrave;, ajoutez une ligne similaire &agrave; la suivante au
	fichier
	<filename>/usr/local/etc/fonts/local.conf</filename>:</para>

      <programlisting>&lt;dir&gt;/chemin/vers/mes/fontes&lt;/dir&gt;</programlisting>

      <para>Après l'ajout de nouvelles polices, et tout
	particulièrement de nouveaux répertoires de polices, vous
	devrez exécuter la commande suivante pour reconstituer le
	cache des polices de caractères:</para>

      <screen>&prompt.root; <userinput>fc-cache -f</userinput></screen>

      <para>L'anticrénelage rend les bords
	légèrement flous, ce qui rend le texte très
	petit plus lisible et enlève l'effet
	<quote>d'escalier</quote> des grands textes, mais peut provoquer
	une fatigue visuelle si c'est appliqué au texte de taille normale.
	Pour exclure les tailles de polices inférieures &agrave; 14 points de
	l'anticrénelage, ajoutez ces lignes:</para>

      <programlisting>	 &lt;match target="font"&gt;
	  &lt;test name="size" compare="less"&gt;
		&lt;double&gt;14&lt;/double&gt;
	  &lt;/test&gt;
	  &lt;edit name="antialias" mode="assign"&gt;
		&lt;bool&gt;false&lt;/bool&gt;
	  &lt;/edit&gt;
	&lt;/match&gt;
	&lt;match target="font"&gt;
	  &lt;test name="pixelsize" compare="less" qual="any"&gt;
		&lt;double&gt;14&lt;/double&gt;
	  &lt;/test&gt;
	  &lt;edit mode="assign" name="antialias"&gt;
		&lt;bool&gt;false&lt;/bool&gt;
	  &lt;/edit&gt;
	&lt;/match&gt;</programlisting>

      <indexterm><primary>polices de caractères</primary>
	<secondary>espacement</secondary></indexterm>

      <para>L'espacement pour certaines polices de caractères
	&agrave; chasse fixe peut également être
	inapproprié avec l'anticrénelage.  Cela semble
	être un problème avec <application>KDE</application>, en
	particulier.  Une solution possible pour cela est de forcer
	l'espacement pour de telles polices de caractères &agrave; 100.
	Ajoutez les lignes suivantes:</para>

      <programlisting>	 &lt;match target="pattern" name="family"&gt;
	  &lt;test qual="any" name="family"&gt;
	    &lt;string&gt;fixed&lt;/string&gt;
	  &lt;/test&gt;
	  &lt;edit name="family" mode="assign"&gt;
	    &lt;string&gt;mono&lt;/string&gt;
	  &lt;/edit&gt;
	&lt;/match&gt;
	&lt;match target="pattern" name="family"&gt;
	  &lt;test qual="any" name="family"&gt;
	    &lt;string&gt;console&lt;/string&gt;
	  &lt;/test&gt;
	  &lt;edit name="family" mode="assign"&gt;
	    &lt;string&gt;mono&lt;/string&gt;
	  &lt;/edit&gt;
	&lt;/match&gt;</programlisting>

      <para>(ceci ajoute un alias <literal>"mono"</literal> pour les autres
	noms communs des polices de caractères fixes), puis
	ajoutez:</para>

      <programlisting>	 &lt;match target="pattern" name="family"&gt;
	  &lt;test qual="any" name="family"&gt;
	    &lt;string&gt;mono&lt;/string&gt;
	  &lt;/test&gt;
	  &lt;edit name="spacing" mode="assign"&gt;
	    &lt;int&gt;100&lt;/int&gt;
	  &lt;/edit&gt;
	&lt;/match&gt;</programlisting>

      <para>Certaines polices de caractères, comme Helvetica,
	peuvent présenter des problèmes lors de
	l'anticrénelage.  Généralement cela se
	manifeste par l'impression que la fonte semble coupée
	en deux verticalement.  Au pire cela peut provoquer des crashs
	avec certaines applications.  Pour éviter cela,
	pensez &agrave; ajouter ce qui suit au fichier
	<filename>local.conf</filename>:</para>

      <programlisting>	 &lt;match target="pattern" name="family"&gt;
	  &lt;test qual="any" name="family"&gt;
	    &lt;string&gt;Helvetica&lt;/string&gt;
	  &lt;/test&gt;
	  &lt;edit name="family" mode="assign"&gt;
	    &lt;string&gt;sans-serif&lt;/string&gt;
	  &lt;/edit&gt;
	&lt;/match&gt;</programlisting>

      <para>Une fois l'édition de
	<filename>local.conf</filename> achevée, assurez-vous
	que le fichier se termine par la balise
	<literal>&lt;/fontconfig&gt;</literal>.  Si ce n'est pas le
	cas, tous vos changements seront ignorés.</para>

      <para>Les utilisateurs peuvent ajouter leurs propres
	paramètres par l'intermédiaire de leur propre fichier
	<filename>~/.config/fontconfig/fonts.conf</filename>.
	Ce fichier doit utiliser le même format <acronym>XML</acronym>
	décrit précédemment.</para>

      <indexterm><primary>Écran LCD</primary></indexterm>
      <indexterm><primary>polices de caractères</primary>
	<secondary>Écran LCD</secondary></indexterm>

      <para>Un dernier point: avec un écran LCD, un
	échantillonnage &ldquo;sub-pixel&rdquo; peut être
	désiré.  Fondamentalement, ceci traite les composantes
	rouge,
	verte et bleu séparément (horizontalement
	séparées) pour améliorer la résolution
	horizontale; les résultats peuvent être dramatiques.
	Pour activer cela, ajoutez quelque part dans le fichier
	<filename>local.conf</filename> les lignes:</para>

      <programlisting>
	 &lt;match target="font"&gt;
	  &lt;test qual="all" name="rgba"&gt;
	    &lt;const&gt;unknown&lt;/const&gt;
	  &lt;/test&gt;
	  &lt;edit name="rgba" mode="assign"&gt;
	    &lt;const&gt;rgb&lt;/const&gt;
	  &lt;/edit&gt;
	&lt;/match&gt;
      </programlisting>

      <note>
	<para>En fonction de type d'écran, le terme
	  <literal>rgb</literal> pourra devoir être changé pour
	  <literal>bgr</literal>, <literal>vrgb</literal> ou
	  <literal>vbgr</literal>: expérimentez
	  pour déterminer lequel fonctionne le mieux.</para>
      </note>
    </sect2>
  </sect1>

  <sect1 xml:id="x-xdm">
    <info>
      <title>Le gestionnaire de connexion graphique XDM</title>
      <authorgroup>
	<author>
	  <personname>
	    <firstname>Seth</firstname>
	    <surname>Kingsley</surname>
	  </personname>
	  <contrib>Contribution originale de </contrib></author>
      </authorgroup>
    </info>
    
      <indexterm><primary>X Display Manager</primary></indexterm>
    <para><application>&xorg;</application> propose un gestionnaire de
      connexion graphique, <application>XDM</application>, qui peut
      être utilisé pour la gestion des procédures de connexion graphique.
      <application>XDM</application> fournit une interface graphique
      pour sélectionner à quel serveur d'affichage se connecter et
      entrer des informations d'autorisation d'accès comme l'ensemble
      identifiant et mot de passe.</para>

    <para>Cette section montre comment configurer le gestionnaire de
      connexion graphique X sous &os;.  Certains environnements de
      bureau fournissent leur propre gestionnaire de connexion
      graphique.  Se référer à la <xref linkend="x11-wm-gnome"/> pour
      des instructions sur comment configurer le gestionnaire de
      connexion graphique GNOME et à la <xref linkend="x11-wm-kde"/>
      pour des instructions concernant la configuration du
      gestionnaire de connexion graphique KDE.</para>

    <sect2>
      <title>Configurer <application>XDM</application></title>

      <para>Pour installer <application>XDM</application>, utilisez le
	logiciel porté ou la version pré-compilée
	<package>x11/xdm</package>.  Une fois installé,
	<application>XDM</application> peut être configuré pour être
	lancé au démarrage de la machine en modifiant la ligne
	suivante dans <filename>/etc/ttys</filename>:</para>

      <screen>ttyv8   "/usr/local/bin/xdm -nodaemon"  xterm   off secure</screen>

      <para>Modifiez le <literal>off</literal> pour
	<literal>on</literal> et sauvegardez la modification.  Le
	champ <literal>ttyv8</literal> sur cette ligne indique que
	<application>XDM</application> démarrera sur le neuvième
	terminal virtuel.</para>

      <para>Le répertoire de configuration
	d'<application>XDM</application> est situé dans
	<filename>/usr/local/etc/X11/xdm</filename>.  Ce répertoire
	contient plusieurs fichiers utilisés pour modifier le
	comportement et l'apparence d'<application>XDM</application>,
	ainsi que quelques procédures et programmes utilisés pour
	configurer le bureau quand <application>XDM</application> est
	exécuté.  <xref linkend="xdm-config-files"/> résume la
	fonction de chacun de ces fichiers.  La syntaxe exacte et
	l'utilisation de ces fichiers sont décrites dans
	&man.xdm.1;.</para>

      <table frame="none" pgwide="1" xml:id="xdm-config-files">
	<title>Fichiers de configuration d'XDM</title>

	<tgroup cols="2">
	  <thead>
	    <row>
	      <entry>Fichier</entry>
	      <entry>Description</entry>
	    </row>
	  </thead>

	  <tbody>
	    <row>
	      <entry><filename>Xaccess</filename></entry>
	      <entry>Le protocole utilisé pour se connecter à
		<application>XDM</application> est appelé le <quote>X
		Display Manager Connection Protocol</quote>
		(<acronym>XDMCP</acronym>).  Ce fichier est un
		ensemble de règles d'autorisation client
		pour contrôler les connexions <acronym>XDMCP</acronym>
		à partir de machines distantes.  Par défaut, ce
		fichier n'autorise pas la connexion de clients
		distants.</entry>
	    </row>

	    <row>
	      <entry><filename>Xresources</filename></entry>
	      <entry>Ce fichier contrôle l'apparence et la prise en
		main du programme de sélection et d'ouverture de
		session <application>XDM</application>.  La
		configuration par défaut est une simple fenêtre
		d'ouverture de session rectangulaire avec le nom de la
		machine hôte affiché en haut dans une grande police de
		caractères et avec les invites <quote>Login:</quote>
		et <quote>Password:</quote> en dessous.  Le format de
		ce fichier est identique au fichier de paramètres par
		défaut décrit dans la documentation
		<application>&xorg;</application></entry>
	    </row>

	    <row>
	      <entry><filename>Xservers</filename></entry>
	      <entry>Liste des affichages distants et locaux que le
		système doit proposer à l'ouverture de
		session.</entry>
	    </row>

	    <row>
	      <entry><filename>Xsession</filename></entry>
	      <entry>Procédure d'ouverture de session par défaut qui
		est exécutée par <application>XDM</application> quand
		un utilisateur se connecte.  Elle pointe vers une
		procedure personnalisée de session dans le répertoire
		<filename>~/.xsession</filename>.</entry>
	    </row>

	    <row>
	      <entry><filename>Xsetup_</filename>*</entry>
	      <entry>Procédures utilisées pour lancer automatiquement
		des applications avant d'afficher les interfaces de
		sélection et d'ouverture de session.  Il existe une
		procedure pour chaque écran utilisé, nommée
		<filename>Xsetup_*</filename>, où <literal>*</literal>
		est le numéro local de l'écran.  En général, ces
		procédures exécutent un ou deux programmes en tâche de
		fond comme <command>xconsole</command>.</entry>
	    </row>

	    <row>
	      <entry><filename>xdm-config</filename></entry>
	      <entry>Configuration globale pour tous les écrans
		tournant sur cette machine.</entry>
	    </row>

	    <row>
	      <entry><filename>xdm-errors</filename></entry>
	      <entry>Contient les erreurs générées par le programme
		serveur.  Si une connexion
		qu'<application>XDM</application> tente d'ouvrir se
		bloque, examinez ce fichier pour trouver des messages
		d'erreur.  Ces messages sont également écrits dans le
		fichier <filename>~/.xsession-errors</filename> de
		l'utilisateur à chaque session.</entry>
	    </row>

	    <row>
	      <entry><filename>xdm-pid</filename></entry>
	      <entry>L'identifiant, <acronym>ID</acronym>, du
		processus exécutant
		<application>XDM</application>.</entry>
	    </row>
	  </tbody>
	</tgroup>
      </table>
    </sect2>

    <sect2>
      <title>Configurer l'accès à distance</title>

      <para>Par défaut, seuls les utilisateurs sur le même système
	peuvent ouvrir une session en utilisant
	<application>XDM</application>.  Pour permettre aux
	utilisateurs d'autres système de se connecter au gestionnaire
	d'affichage, éditez les règles de contrôle d'accès et activez
	l'écoute des demandes de connexion.</para>

      <para>Pour configurer <application>XDM</application> pour
	l'écoute des demandes de connexions distantes, commentez la
	ligne <literal>DisplayManager.requestPort</literal> dans le
	fichier <filename>/usr/local/etc/X11/xdm/xdm-config</filename>
	en ajoutant un <literal>!</literal> devant:</para>

      <screen>! SECURITY: do not listen for XDMCP or Chooser requests
! Comment out this line if you want to manage X terminals with xdm
DisplayManager.requestPort:     0</screen>

      <para>Sauvegardez et relancez <application>XDM</application>.
	Pour restreindre l'accès à distance, consultez les exemples
	dans <filename>/usr/local/etc/X11/xdm/Xaccess</filename> ainsi
	que la page de manuel &man.xdm.1; pour plus
	d'informations</para>
    </sect2>
  </sect1>

  <sect1 xml:id="x11-wm">
    <info>
      <title>Environnements de bureau</title>

      <authorgroup>
	<author>
	  <personname>
	    <firstname>Valentino</firstname>
	    <surname>Vaschetto</surname>
	  </personname>
	  <contrib>Contribution de </contrib>
	<!-- June 2001 -->
	</author>
      </authorgroup>
    </info>

    <para>Cette section décrit comment installer sur un système &os;
      un des trois environnements de bureau populaires.  Un
      environnement de bureau peut aller du simple gestionnaire de
      fenêtres jusqu'à la suite complète d'applications de bureau.
      Plus d'une centaine d'environnements est disponible dans la
      catégorie <filename>x11-wm</filename> du catalogue des logiciels
      portés.</para>

    <sect2 xml:id="x11-wm-gnome">
      <title>GNOME</title>

	<indexterm><primary>GNOME</primary></indexterm>
        <para><application>GNOME</application> est un environnement de
	  bureau convivial.  Il comprend un panneau
	  (<quote>panel</quote>) pour lancer des applications et
	  afficher des états, un bureau, un ensemble d'outils et
	  d'applications, et un ensemble de conventions qui rendent
	  aisée la coopération et la cohérence entre applications.
	  Plus d'informations concernant
	  <application>GNOME</application> sous &os; peuvent être
	  trouvées sur <link xlink:href="https://www.FreeBSD.org/gnome">https://www.FreeBSD.org/gnome</link>.
	  Le site contient de la documentation supplémentaire
	  sur l'installation, la
	  configuration, et l'administration de
	  <application>GNOME</application> sous &os;.</para>

      <para>Cet environnement de bureau peut être installé à partir
	d'un paquet pré-compilé:</para>

      <screen>&prompt.root; <userinput>pkg install gnome3</userinput></screen>

      <para>Pour plutôt compiler <application>GNOME</application> à
	partir du catalogue des logiciels portés, utilisez la commande
	qui suit.  <application>GNOME</application> est une
	application importante en taille et qui demandera un temps
	notable pour être compilée, et cela, même sur un ordinateur
	rapide.</para>

      <screen>&prompt.root; <userinput>cd /usr/ports/x11/gnome3</userinput>
&prompt.root; <userinput>make install clean</userinput></screen>

      <para><application>GNOME</application>
	a besoin que <filename>/proc</filename> soit monté.  Ajoutez
	la ligne suivante au fichier <filename>/etc/fstab</filename>
	pour monter ce système de fichiers automatiquement au
	démarrage:</para>

      <programlisting>proc           /proc       procfs  rw  0   0</programlisting>

      <para><application>GNOME</application> utilise
	<application>D-Bus</application> et
	<application>HAL</application> comme bus des messages et
	couche d'abstraction matérielle.  Ces applications sont
	automatiquement installées comme dépendances à
	<application>GNOME</application>.  Activez-les dans
	<filename>/etc/rc.conf</filename> pour qu'elles soient lancées
	au démarrage du système:</para>

      <programlisting>dbus_enable="YES"
hald_enable="YES"</programlisting>

      <para>Après l'installation, il faut configurer
	<application>&xorg;</application> pour lancer <application>GNOME</application>.
        La manière la plus simple de faire cela est d'activer le
	gestionnaire d'affichage de GNOME,
	  <application>GDM</application>, qui est installé par
	  défaut comme élément du paquet pré-compilé ou du logiciel
	  porté <application>GNOME</application>.  Il peut être
	  activé en ajoutant la ligne
	  suivante au fichier <filename>/etc/rc.conf</filename>:</para>

      <programlisting>gdm_enable="YES"</programlisting>

      <para>Il est souvent intéressant de lancer également tous les
	services <application>GNOME</application>.  Pour accomplir
	cela, ajoutez une seconde ligne à
	<filename>/etc/rc.conf</filename>:</para>

      <programlisting>gnome_enable="YES"</programlisting>

      <para><application>GDM</application> sera lancé automatiquement
	au démarrage du système.</para>

      <para>Une deuxième méthode de lancement de
	<application>GNOME</application> est de taper
	<command>startx</command> à partir de la ligne de commande
	après avoir configuré le fichier <filename>~/.xinitrc</filename>.
	Si ce fichier  existe déjà, remplacez la ligne qui lance
	le gestionnaire de fenêtres actuel par une qui exécute
	<filename>/usr/local/bin/gnome-session</filename>.  Si ce
	fichier n'existe pas, créez-le avec la commande:</para>

      <screen>&prompt.user; <userinput>echo "exec /usr/local/bin/gnome-session" &gt; ~/.xinitrc</userinput></screen>

      <para>Une troisième méthode est d'utiliser
	<application>XDM</application> comme gestionnaire d'affichage.
	Dans ce cas, créez un exécutable
	<filename>~/.xsession</filename>:</para>

      <screen>&prompt.user; <userinput>echo "exec /usr/local/bin/gnome-session" &gt; ~/.xsession</userinput></screen>
    </sect2>

    <sect2 xml:id="x11-wm-kde">
      <title>KDE</title>

      <indexterm><primary>KDE</primary></indexterm>

	<para><application>KDE</application> est un autre
	  environnement de bureau simple d'utilisation.  Ce bureau
	  propose une suite d'applications avec une apparence et une
	  prise en main commune, des menus et des barres d'outils, des
	  raccourcis clavier, des couleurs et une régionalisation
	  standardisés, ainsi qu'un système de configuration de
	  l'environnement centralisé.  Plus d'informations sur
	  <application>KDE</application> peuvent être trouvées sur
	  <link
	    xlink:href="http://www.kde.org/">http://www.kde.org/</link>.
	  Pour des informations spécifiques à &os;, consultez <link
	    xlink:href="http://freebsd.kde.org/">http://freebsd.kde.org</link>.</para>

        <para>Pour installer la version pré-compilée de
	  <application>KDE</application>, tapez:</para>

      <screen>&prompt.root; <userinput>pkg install x11/kde5</userinput></screen>

      <para>Pour plutôt compiler <application>KDE</application> à
	partir du catalogue des logiciels portés, utilisez la commande
	qui suit.  L'installation du logiciel porté proposera un menu
	pour sélectionner quel composant à installer.
	<application>KDE</application> est une application importante
	en taille et qui demandera un temps notable pour être
	compilée, et cela, même sur un ordinateur rapide.</para>

      <screen>&prompt.root; <userinput>cd /usr/ports/x11/kde5</userinput>
&prompt.root; <userinput>make install clean</userinput></screen>
      
      <para><application>KDE</application>
	a besoin que <filename>/proc</filename> soit monté.  Ajoutez
	la ligne suivante au fichier <filename>/etc/fstab</filename>
	pour monter ce système de fichiers automatiquement au
	démarrage:</para>

      <programlisting>proc           /proc       procfs  rw  0   0</programlisting>

      <para><application>KDE</application> utilise
	<application>D-Bus</application> et
	<application>HAL</application> comme bus des messages et
	couche d'abstraction matérielle.  Ces applications sont
	automatiquement installées comme dépendances à
	<application>KDE</application>.  Activez-les dans
	<filename>/etc/rc.conf</filename> pour qu'elles soient lancées
	au démarrage du système:</para>

      <programlisting>dbus_enable="YES"
hald_enable="YES"</programlisting>

      <indexterm>
	<primary>KDE</primary>
	<secondary>gestionnaire d'affichage</secondary>
      </indexterm>

      <para>Depuis KDE Plasma 5, le gestionnaire d'affichage KDE,
	<application>KDM</application>, n'est plus développé.  Un
	remplacement possible est <application>SDDM</application>.
	Pour l'installer, tapez:</para>

      <screen>&prompt.root; <userinput>pkg install x11/sddm</userinput></screen>

      <para>Ajoutez cette ligne à
	<filename>/etc/rc.conf</filename>:</para>

      <programlisting>sddm_enable="YES"</programlisting>


      <para>Une deuxième méthode de lancement de
	<application>KDE Plasma</application> est de taper
	<command>startx</command> à partir de la ligne de commande.
	Pour que cela fonctionne, la ligne suivante est requise dans
	<filename>~/.xinitrc</filename>:</para>

      <programlisting>exec ck-launch-session startplasma-x11</programlisting>

      <para>Une troisième méthode de lancement de
	<application>KDE Plasma</application> utilise
	<application>XDM</application>.  Dans ce cas, créez un exécutable
	<filename>~/.xsession</filename> comme indiqué:</para>

      <screen>&prompt.user; <userinput>echo "exec ck-launch-session startplasma-x11" &gt; ~/.xsession</userinput></screen>

      <para>Une fois <application>KDE Plasma</application> lancée,
	consultez son système d'aide intégrée pour plus d'informations
	sur comment utiliser ses différents menus et
	applications.</para>
    </sect2>

     <sect2 xml:id="x11-wm-xfce">
         <title>XFce</title>

	<para><application>XFce</application> est un environnement de
	  bureau basé sur le &ldquo;toolkit&rdquo; GTK+
	  utilisé par <application>GNOME</application>.  Cependant, il est
	  plus léger et offre un bureau simple, efficace et simple
	  d'utilisation.  Il est complètement configurable, dispose
	  d'une barre principale avec des menus, des petites
	  applications et des lanceurs d'applications, il fournit un
	  gestionnaire de fichiers et un gestionnaire du son, et il
	  est personnalisable avec des thèmes.  Puisqu'il est rapide,
	  léger et efficace, il est idéal pour les machines anciennes
	  ou lentes avec des limitations en mémoire.  Plus
	  d'informations sur <application>XFce</application> peuvent
	  être trouvées sur le site <link
	    xlink:href="http://www.xfce.org/">http://www.xfce.org</link>.</para>

      <para>Pour installer le paquet pré-compilé de
	<application>Xfce</application>:</para>

      <screen>&prompt.root; <userinput>pkg install xfce</userinput></screen>

        <para>Alternativement, pour compiler le logiciel porté:</para>

        <screen>&prompt.root; <userinput>cd /usr/ports/x11-wm/xfce4</userinput>
&prompt.root; <userinput>make install clean</userinput></screen>
      
      <para><application>Xfce</application> utilise
	<application>D-Bus</application> comme bus des messages.
	Cette application est automatiquement installée comme
	dépendance à <application>Xfce</application>.  Activez-la dans
	<filename>/etc/rc.conf</filename> pour qu'elle soit lancée au
	démarrage du système:</para>

      <programlisting>dbus_enable="YES"</programlisting>

      <para>Contrairement à <application>GNOME</application> ou
	<application>KDE</application>,
	<application>Xfce</application> ne fournit pas son propre
	gestionnaire de session.  Afin de lancer <application>Xfce</application>
	à partir de la ligne de commande en tapant <command>startx</command>,
	créez d'abord le fichier <filename>~/.xinitrc</filename> à
	l'aide de la ligne:</para>

      <screen>&prompt.user; <userinput>echo ". /usr/local/etc/xdg/xfce4/xinitrc" &gt; ~/.xinitrc</userinput></screen>

      <para>Une méthode alternative est d'utiliser
	<application>XDM</application>.  Pour configurer cette
	méthode, créez un exécutable <filename>~/.xsession</filename>:</para>

      <screen>&prompt.user; <userinput>echo ". /usr/local/etc/xdg/xfce4/xinitrc" &gt; ~/.xsession</userinput></screen>
    </sect2>
  </sect1>

  <sect1 xml:id="x-compiz-fusion">
    <title>Installation de Compiz Fusion</title>

    <para>Une méthode pour rendre l'utilisation d'un ordinateur plus
      plaisante est l'ajout de jolis effets en 3D.</para>

    <para>L'installation du paquet binaire
      <application>Compiz&nbsp;Fusion</application> est simple, mais
      sa configuration demande quelques étapes qui ne sont pas
      décrites dans la documentation du logiciel porté.</para>

    <sect2 xml:id="x-compiz-video-card">
      <title>Configuration du pilote nVidia &os;</title>

      <para>Les effets visuels dans l'environnement de bureau peuvent
	être à l'origine d'une charge non-négligeable pour la carte
	graphique.  Pour les cartes graphiques nVidia, le pilote de
	périphérique propriétaire est nécessaire pour obtenir de
	bonnes performances.  Les utilisateurs d'autres cartes
	graphiques peuvent sauter cette section et poursuivre avec la
	partie sur la configuration
	d'<filename>xorg.conf</filename>.</para>

      <para>Pour déterminer quel pilote nVidia est requis, consultez
	la <link xlink:href="&url.books.faq;/x.html#idp59950544">FAQ à
	ce sujet</link>.</para>

      <para>Après avoir déterminé le pilote correct à utiliser pour
	votre carte, l'installation est aussi simple que d'installer
	n'importe quel autre paquet binaire.</para>

      <para>Par exemple, pour installer la dernière version du
	pilote:</para>

      <screen>&prompt.root; <userinput>pkg install x11/nvidia-driver</userinput></screen>

      <para>Le pilote créera un module noyau, qui doit être chargé au
	démarrage du système.  Ajoutez la ligne suivante au fichier
	<filename>/boot/loader.conf</filename>:</para>

      <programlisting>nvidia_load="YES"</programlisting>

      <note>
	<para>Pour charger immédiatement le module noyau dans le
	  noyau en cours d'utilisation, utilisez une commande du type
	  <command>kldload nvidia</command>.  Cependant, il a été
	  remarqué que certaines versions
	  d'<application>&xorg;</application> ne fonctionnaient pas
	  correctement si le pilote n'était pas chargé lors du
	  démarrage du système.  Après l'édition du fichier
	  <filename>/boot/loader.conf</filename>,
	  un redémarrage est donc recommandé.</para>
      </note>

      <para>Avec le module noyau chargé, seul la modification d'une
	ligne dans <filename>xorg.conf</filename> est nécessaire pour
	activer le pilote propriétaire:</para>

      <para>Trouvez la ligne suivante dans
	<filename>/etc/X11/xorg.conf</filename>:</para>

      <programlisting>Driver      "nv"</programlisting>

      <para>et modifiez-la pour:</para>

      <programlisting>Driver      "nvidia"</programlisting>

      <para>Lancez l'interface graphique comme vous en avez
	l'habitude, et vous devriez être accueilli par le logo nVidia.
	Tout devrait fonctionner comme à l'accoutumée.</para>
    </sect2>

    <sect2 xml:id="xorg-configuration">
      <title>Configuration d'xorg.conf pour les effets visuels</title>

      <para>Pour activer <application>Compiz&nbsp;Fusion</application>,
        <filename>/etc/X11/xorg.conf</filename> doit être
	modifié:</para>

      <para>Ajoutez la section suivante pour activer les effets du
	compositeur:</para>

      <programlisting>Section "Extensions"
    Option         "Composite" "Enable"
EndSection</programlisting>

      <para>Recherchez la section <quote>Screen</quote> qui devrait
	être semblable à celle ci-dessous:</para>

      <programlisting>Section "Screen"
    Identifier     "Screen0"
    Device         "Card0"
    Monitor        "Monitor0"
    ...</programlisting>

      <para>et ajouter les deux lignes suivantes (après
        la ligne <quote>Monitor</quote>):</para>

      <programlisting>DefaultDepth    24
Option         "AddARGBGLXVisuals" "True"</programlisting>

      <para>Recherchez la partie <quote>Subsection</quote> faisant
	référence à la définition de l'écran que vous voulez utiliser.
	Par exemple, si vous voulez utiliser une définition de
	1280x1024, recherchez la partie comme ci-dessous.  Si la
	définition voulue n'apparaît nulle part, vous devrez ajouter
	l'entrée correspondante à la main:</para>

      <programlisting>SubSection     "Display"
    Viewport    0 0
    Modes      "1280x1024"
EndSubSection</programlisting>

      <para>Une profondeur de couleurs de 24&nbsp;bits est requise
	pour un bureau utilisant la composition, modifiez la section
	précédente pour:</para>

      <programlisting>SubSection     "Display"
    Viewport    0 0
    Depth       24
    Modes      "1280x1024"
EndSubSection</programlisting>

      <para>Et enfin, vérifiez que les modules <quote>glx</quote> et
	<quote>extmod</quote> sont chargés dans la section
	<quote>Module</quote>:</para>

      <programlisting>Section "Module"
    Load           "extmod"
    Load           "glx"
    ...</programlisting>

      <para>Ce qui précède peut être effectué automatiquement avec
	<package>x11/nvidia-xconfig</package> en exécutant (en tant
	que <systemitem class="username">root</systemitem>):</para>

      <screen>&prompt.root; <userinput>nvidia-xconfig --add-argb-glx-visuals</userinput>
&prompt.root; <userinput>nvidia-xconfig --composite</userinput>
&prompt.root; <userinput>nvidia-xconfig --depth=24</userinput></screen>
    </sect2>

    <sect2 xml:id="compiz-fusion">
      <title>Installation et configuration de Compiz&nbsp;Fusion</title>

      <para>L'installation de <application>Compiz&nbsp;Fusion</application>
	est aussi simple que celle de n'importe quel paquet
	binaire:</para>

      <screen>&prompt.root; <userinput>pkg install x11-wm/compiz-fusion</userinput></screen>

      <para>Quand l'installation est achevée, lancez votre
	environnement de bureau et, à un terminal, entrez les
	commandes suivantes (sous l'utilisateur normal):</para>

      <screen>&prompt.user; <userinput>compiz --replace --sm-disable --ignore-desktop-hints ccp &amp;</userinput>
&prompt.user; <userinput>emerald --replace &amp;</userinput></screen>

      <para>Votre écran devrait clignoter quelques secondes, étant
	donné que votre gestionnaire de fenêtres (par exemple
	<application>Metacity</application> si vous utilisez
	<application>GNOME</application>) est remplacé par
	<application>Compiz&nbsp;Fusion</application>.
	<application>Emerald</application> s'occupera de la décoration
	des fenêtres (c'est à dire, les boutons de fermeture, de
	réduction, d'agrandissement, les barres de titres
	etc.).</para>

      <para>Vous avez la possibilité de convertir tout cela en une
	procédure à exécuter automatiquement au démarrage (par exemple
	en l'ajoutant à <quote>Sessions</quote> dans le cas d'un
	bureau <application>GNOME</application>):</para>

      <programlisting>#! /bin/sh
compiz --replace --sm-disable --ignore-desktop-hints ccp &amp;
emerald --replace &amp;</programlisting>

      <para>Sauvegardez ce fichier dans votre répertoire personnel
	sous le nom, par exemple, <filename>start-compiz</filename> et
	rendez-le exécutable:</para>

      <screen>&prompt.user; <userinput>chmod +x ~/start-compiz</userinput></screen>

      <para>Utilisez ensuite l'interface graphique pour l'ajouter au
	menu <guimenuitem>Startup Programs</guimenuitem> (situé dans
	<guimenuitem>System</guimenuitem>,
	<guimenuitem>Preferences</guimenuitem>,
	<guimenuitem>Sessions</guimenuitem> dans le cas d'un
	environnement de bureau
	<application>GNOME</application>).</para>

      <para>Pour sélectionner tous les effets visuels désirés et leurs
	paramètres, exécutez (toujours en tant qu'utilisateur normal)
	le programme
	<application>Compiz&nbsp;Config&nbsp;Settings&nbsp;Manager</application>:</para>

      <screen>&prompt.user; <userinput>ccsm</userinput></screen>

      <note>
	<para>Sous <application>GNOME</application>, il peut être
	  trouvé dans le menu <guimenuitem>System</guimenuitem>, puis
	  <guimenuitem>Preferences</guimenuitem>.</para>
      </note>

      <para>Si vous avez sélectionné <quote>gconf support</quote> lors
	de la compilation, vous pourrez également voir ces paramètres
	en utilisant <command>gconf-editor</command> sous
	<literal>apps/compiz</literal>.</para>
    </sect2>
  </sect1>
</chapter>

<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE report PUBLIC "-//FreeBSD//DTD FreeBSD XML Database for
  Status Report//EN"
  "http://www.FreeBSD.org/XML/share/xml/statusreport.dtd" >

<!-- $FreeBSD$ -->

<report>
  <date>
    <month>January-March</month>

    <year>2016</year>
  </date>

  <section>
    <title>Introduction</title>

    <p>The first quarter of 2016 showed that FreeBSD retains a strong
	sense of ipseity.  Improvements were pervasive, lending
	credence to the concept of meliorism.</p>

    <p>Panegyrics are relatively scarce, but not for lack of need.
      Perhaps this missive might serve that function in some
      infinitesimal way.</p>

    <p>There was propagation, reformation, randomization,
      accumulation, emulation, transmogrification, debuggenation, and
      metaphrasal during this quarter.</p>

    <p>In the financioartistic arena, pork snout futures narrowly
      edged out pointilism, while parietal art remained fixed.</p>

    <p>In all, a discomfiture of abundance.  View the rubrics below,
      and marvel at their profusion and magnitude!  Marvel!</p>

    <p>&mdash;Warren Block</p>

    <p><hr /></p>

    <p>Please submit status reports for the second quarter of 2016 by
      July 7.  A thesaurus will be provided for submitters who do not
      have one of their own.  We will need them back afterwards,
      preferably with no new teeth marks on the covers.  Thank
      you!</p>
  </section>

  <category>
    <name>team</name>

    <description>&os; Team Reports</description>
  </category>

  <category>
    <name>proj</name>

    <description>Projects</description>
  </category>

  <category>
    <name>kern</name>

    <description>Kernel</description>
  </category>

  <category>
    <name>arch</name>

    <description>Architectures</description>
  </category>

  <category>
    <name>bin</name>

    <description>Userland Programs</description>
  </category>

  <category>
    <name>ports</name>

    <description>Ports</description>
  </category>

  <category>
    <name>doc</name>

    <description>Documentation</description>
  </category>

  <category>
    <name>misc</name>

    <description>Miscellaneous</description>
  </category>

  <project cat='kern'>
    <title>Static Analysis of the &os; Kernel with PVS Studio</title>

    <icon>32/kern.png</icon>

    <contact>
      <person>
	<name>
	  <given>Warren</given>
	  <common>Block</common>
	</name>
	<email>wblock@FreeBSD.org</email>
      </person>
    </contact>

    <links>
      <url href="http://www.viva64.com/en/b/0377/">PVS-Studio Delved into the FreeBSD Kernel</url>
      <url href="https://reviews.freebsd.org/D5245">PVS Static Analysis Phabricator Review</url>
    </links>

    <body>
      <p>In February, Program Verification Systems used their
	PVS-Studio tool to run a static analysis of the &os; kernel.
	A Phabricator review was created to allow developers to share
	comments on the results.  A number of bugs ranging from
	trivial typos to redundant code to important logic errors were
	found and fixed.  Some results were false positives.  Several
	of these were addressed by changing code that misled the
	static analyzer and could also mislead a human reader.</p>

      <p>The cooperation that Program Verification Systems offers to
	open-source projects like &os; benefits everyone.  We thank
	them for sharing this analysis and their insights with us.</p>
    </body>
  </project>

  <project cat='doc'>
    <title>Spanish FAQ and Chinese Porter's Handbook
      Translations</title>

    <icon>32/doc.jpg</icon>

    <contact>
      <person>
	<name>
	  <given>Federico</given>
	  <common>Caminiti</common>
	</name>
	<email>demian.fc@gmail.com</email>
      </person>

      <person>
	<name>
	  <given>Carlos</given>
	  <common>J Puga Medina</common>
	</name>
	<email>cpm@fbsd.es</email>
      </person>

      <person>
	<name>
	  <given>Ruey-Cherng</given>
	  <common>Yu</common>
	</name>
	<email>raycherng@gmail.com</email>
      </person>

      <person>
	<name>
	  <given>Warren</given>
	  <common>Block</common>
	</name>
	<email>wblock@FreeBSD.org</email>
      </person>
    </contact>

    <links>
      <url href="https://www.freebsd.org/doc/es_ES.ISO8859-1/books/faq/">Preguntas Frecuentes para FreeBSD 9.X y 10.X</url>
      <url href="https://www.freebsd.org/doc/zh_TW.UTF-8/books/porters-handbook/">FreeBSD Porter 手冊</url>
      <url href="https://lists.freebsd.org/pipermail/freebsd-translators/">&os; Translators Mailing List</url>
      <url href="https://www.freebsd.org/doc/en_US.ISO8859-1/books/fdp-primer/po-translations.html">PO Translations</url>
      <url href="https://www.freebsd.org/doc/en_US.ISO8859-1/books/fdp-primer/">&os; Documentation Project Primer for New Contributors</url>
    </links>

    <body>
      <p>Federico Caminiti created an entirely new Spanish translation
	of the 31,000-word
	<a href="https://www.freebsd.org/doc/en_US.ISO8859-1/books/faq/">FAQ</a>
	with editorial help from Carlos J Puga Medina.</p>

      <p>This landmark accomplishment marks the first use of the new
	PO translation system to translate an entire book!</p>

      <p>Ruey-Cherng Yu has begun an ambitious Traditional Chinese
	(zh_TW) translation of the 64,000-word
	<a href="https://www.freebsd.org/doc/en_US.ISO8859-1/books/porters-handbook/">Porter's Handbook</a>.
	About half of the strings in the book have been translated so
	far.</p>
    </body>

    <help>
      <task>
	<p>Help add and improve translations of &os; documents into
	  Spanish:
	  <a href="https://lists.freebsd.org/pipermail/freebsd-translators/2016-March/000113.html">start of <tt>freebsd-translators</tt> thread</a>.</p>
      </task>

      <task>
	<p>Help add and improve translations of &os; documents into
	  Chinese or other languages.</p>
      </task>
    </help>
  </project>

  <project cat='kern'>
    <title>NFS Server</title>

    <contact>
      <person>
	<name>
	  <given>Rick</given>
	  <common>Macklem</common>
	</name>
	<email>rmacklem@FreeBSD.org</email>
      </person>
    </contact>


    <body>
      <p>A new <tt>-manage-gids</tt> option was added to the
	<tt>nfsuserd</tt> daemon.  This option tells the NFS server to
	use the list of groups for a uid on the server and not the
	list of groups in the NFS RPC request.  Use of this option
	avoids the 16 group limit for NFS RPCs using AUTH_SYS (the
	default).</p>

      <p>Work is ongoing with respect to development of pNFS support
	for the NFS server using GlusterFS as a back end.  This will
	be a long-term project with the eventual goal of allowing the
	NFS server to scale beyond a single server system.  Hopefully
	it will be available for testing in late Spring 2016.  pNFS
	allows an NFSv4.1 client to do reads/writes directly to a data
	server and not the NFS server.</p>
    </body>

    <help>
      <task>
	<p>The pNFS server will be in need of testing during
	  development or it will never progress to a near-production
	  status.  I hope to have code available in &os;'s Subversion
	  project branch for testing in late spring 2016.</p>
      </task>
    </help>
  </project>

  <project cat='arch'>
    <title><tt>powerpcspe</tt> Target</title>

    <contact>
      <person>
	<name>
	  <given>Justin</given>
	  <common>Hibbits</common>
	</name>
	<email>jhibbits@FreeBSD.org</email>
      </person>
    </contact>

    <links>
      <url href="https://svnweb.freebsd.org/base/projects/powerpcspe/">Source Tree</url>
    </links>

    <body>
      <p>This project aims to enable the use of the Signal Processing
	Engine found in the NXP/Freescale e500v2 SoC.  The SPE uses
	opcodes overlapping with those of Altivec, so they are
	mutually exclusive.  Additionally, the e500v2 does not have a
	traditional FPU, and instead uses the SPE for all floating
	point operations (or emulation, as is currently done).
	Combined with the fact that the SPE ABI is incompatible with
	the traditional ABI, a new MACHINE_ARCH has been created to
	address these incompatibilities.</p>

      <p>A project branch has been created for the work.  A
	powerpcspe kernel boots on the RouterBoard RB800, and the base
	utilities run properly.</p>
    </body>

    <help>
      <task>
	<p>Potentially optimizing <tt>setjmp</tt>/<tt>longjmp</tt> to
	  not use SPE unless it has already been enabled.  This would
	  save the kernel switch for processes that do not otherwise
	  use the SPE.  This is a low priority task which may not be
	  completed.</p>
      </task>
    </help>
  </project>

  <project cat="proj">
    <title>The Graphics Stack on FreeBSD</title>

    <contact>
      <person>
	<name>
	  <common>FreeBSD Graphics team</common>
	</name>
	<email>freebsd-x11@FreeBSD.org</email>
      </person>
    </contact>

    <links>
      <url href="https://wiki.freebsd.org/Graphics">Graphics Stack Roadmap and Supported Hardware Matrix</url>
      <url href="https://github.com/freebsd/freebsd-ports-graphics">Ports Development Tree on GitHub</url>
      <url href="https://fosdem.org/2016/schedule/event/freebsd_graphic_stack/">FreeBSD Graphics Team at FOSDEM 2016</url>
      <url href="https://wiki.freebsd.org/SummerOfCodeIdeas#Devices_management:_link_.2Fdev_entries_to_sysctl_nodes">GSoC 2016: link <tt>/dev</tt> Entries to <tt>sysctl</tt> Nodes</url>
      <url href="https://wiki.freebsd.org/SummerOfCodeIdeas#Devices_management:_redesign_and_rewrite_libdevq">GSoC 2016: Redesign <tt>libdevq</tt></url>
      <url href="http://planet.freebsd.org/graphics/">Graphics Team Blog</url>
    </links>

    <body>
      <p>The major news for this quarter is the update of the i915
	driver in the kernel!  The driver now matches Linux 3.8.13, so
	it includes initial Haswell support.  Linux 3.8 is already
	three years old, but work continues to upgrade DRM further.
	In particular, work commenced to move to using the
	<tt>linuxkpi</tt> compatibility.</p>

      <p>In the Ports tree, Mesa was updated to 11.1.2. The next minor
	release, 11.2.0, is ready for testing in our development tree.
	We also updated libclc to 0.2.0.20151006, a library used by
	Mesa to provide OpenCL support.  Upstream patches were added
	to beignet so all these ports now use the same LLVM
	version.</p>

      <p>We attended FOSDEM 2016 in Brussels.  Jean-Sébastien Pédron
	gave a talk to explain the work of the graphics team and show
	how people can contribute.  It was well received and the
	presentation was followed by interesting discussions.  FOSDEM
	was also a nice occasion to meet and talk again to the nice
	upstream developers of the graphics stack.</p>

      <p>For the first year, we added two ideas for GSoC 2016: one for
	a kernel task, one to redesign <tt>libdevq</tt>.  Six students
	submitted proposals for those ideas; that was unexpected!
	We now need to decide which one we want to mentor and the
	choice is difficult.</p>

      <p>Our blog has moved to a
	<a href="http://planet.freebsd.org/graphics/">new location</a>
	(linked above).</p>
    </body>

    <help>
      <task>
	<p>See the &quot;Graphics&quot; wiki page for up-to-date
	  information.</p>
      </task>
    </help>
  </project>

  <project cat='kern'>
    <title>ARM Allwinner SoC Support</title>

    <contact>
      <person>
	<name>
	  <given>Jared</given>
	  <common>McNeill</common>
	</name>
	<email>jmcneill@FreeBSD.org</email>
      </person>

      <person>
	<name>
	  <given>Emmanuel</given>
	  <common>Vadot</common>
	</name>
	<email>manu@bidouilliste.com</email>
      </person>
    </contact>

    <links>
      <url href="https://wiki.freebsd.org/FreeBSD/arm/Allwinner">Allwinner FreeBSD Wiki</url>
    </links>

    <body>
      <p>Allwinner SoCs are used in multiple hobbyist devboards and
	single-board computers.  Recently, support for these SoCs has
	received a lot of updates</p>

      <p>Task done during first quarter:</p>

      <ul>
	<li>I2C</li>

	<li>HDMI output</li>

	<li>Basic AXP209 support (Power Management Unit)</li>

	<li>Switch to upstream DTS for most boards</li>

	<li>Basic Support for A31/A31S SoC</li>

	<li>RTC</li>

	<li>Proper Pinmux/GPIO support</li>

	<li>Audio Codec / Audio HDMI</li>

	<li>A10/A20 DMA support</li>

	<li>A20 now uses the GIC (General Interrupt Controller)</li>

	<li>A20 now uses the ARM Generic Timer</li>
      </ul>

      <p>Ongoing tasks:</p>

      <ul>
	<li>Switch to a new clock framework
	  <a href="https://reviews.freebsd.org/D5752">(In review)</a></li>

	<li>Convert the A10 interrupt controller to INTRNG
	  <a href="https://reviews.freebsd.org/D5573">(In review)</a></li>

	<li>OHCI support
	  <a href="https://reviews.freebsd.org/D5481">(In review)</a></li>

	<li>Generic ALLWINNER kernel config file
	  <a href="https://reviews.freebsd.org/D5580">(In review)</a></li>

	<li>A20/A31 NMI support
	  <a href="https://reviews.freebsd.org/D5663">(In review)</a></li>

	<li>USB OTG</li>

	<li>Finish the switch to using upstream DTS files</li>

	<li>A83T SoC Support</li>

	<li>H3 SoC Support</li>
      </ul>
    </body>

    <help>
      <task>
	<p>SPI driver</p>
      </task>

      <task>
	<p>LCD Support</p>
      </task>

      <task>
	<p>Any unsupported hardware device that might be of
	  interest.</p>
      </task>
    </help>
  </project>

  <project cat='doc'>
    <title>New FreeBSD Mastery Books</title>

    <contact>
      <person>
	<name>
	  <given>Michael</given>
	  <common>Lucas</common>
	</name>
	<email>mwlucas@michaelwlucas.com</email>
      </person>

      <person>
	<name>
	  <given>Allan</given>
	  <common>Jude</common>
	</name>
	<email>allanjude@FreeBSD.org</email>
      </person>
    </contact>

    <links>
      <url href="https://www.michaelwlucas.com/nonfiction/fmsf">FreeBSD Mastery: Specialty Filesystems</url>
      <url href="https://www.michaelwlucas.com/nonfiction/fmaz">FreeBSD Mastery: Advanced ZFS</url>
      <url href="https://www.tiltedwindmillpress.com/">Tilted Windmill Press</url>
    </links>

    <body>
      <p>Two new <em>FreeBSD Mastery</em> books are out:</p>

      <p><em>FreeBSD Mastery: Specialty Filesystems</em> by Michael
	W. Lucas, and the long-awaited
	<em>FreeBSD Mastery: Advanced ZFS</em> by Lucas
	and Allan Jude.</p>

      <p>Both books are available in print and ebook formats now.</p>

      <p>A bundle containing all the FreeBSD Mastery books is
	available at a discount from
	<a href="https://www.tiltedwindmillpress.com/">tiltedwindmillpress.com</a>.</p>
    </body>

    <help>
      <task>
	<p>Write more books!</p>
      </task>
    </help>
  </project>

  <project cat='arch'>
    <title>FreeBSD on Cavium ThunderX (arm64)</title>

    <contact>
      <person>
	<name>
	  <given>Dominik</given>
	  <common>Ermel</common>
	</name>
	<email>der@semihalf.com</email>
      </person>

      <person>
	<name>
	  <given>Wojciech</given>
	  <common>Macek</common>
	</name>
	<email>wma@semihalf.com</email>
      </person>

      <person>
	<name>
	  <given>Zbigniew</given>
	  <common>Bodek</common>
	</name>
	<email>zbb@semihalf.com</email>
      </person>
    </contact>


    <body>
      <p>Since the last report, &os; support for ThunderX has been
	significantly improved and stabilized.  Semihalf contributions
	include the following items:</p>

      <ul>
	<li>Support for the newest ThunderX chip revisions (Pass 2.0)
	  and current Cavium firmware.  Backward compatibility is
	  maintained.</li>

	<li>Moved to using <tt>pci_host_generic.c</tt> as a main
	  driver for the internal PCIe bridge.  This involved a
	  significant rework of PCIe code to support both generic and
	  ThunderX based platforms.</li>

	<li> Serious networking performance boost and bug fixes:</li>
	  <ul>
	    <li>Fixed race condition on Rx path causing a very rare
	      &quot;use after free&quot; issue</li>

	    <li>Hardware L3 and L4 checksums support</li>

	    <li>Hardware assisted TCP Segmentation Offloading
	      (TSO)</li>

	    <li>Support for software Large Receive Offload (LRO)</li>

	    <li>Various improvements to Tx and Rx paths and
	      configuration</li>
	  </ul>
      </ul>

      <p>The driver supports all available Ethernet connections (1,
	10, 40 Gbps) and the system can saturate a 10 Gbps link (on
	Tx) using 4 CPU cores.</p>

      <ul>
	<li>Significantly improved overall I/O performance:</li>
	<ul>
	  <li>Complete rework of <tt>copyin</tt>/<tt>copyout</tt> and
	    <tt>bzero</tt> functionalities</li>
	</ul>

	<li>Other improvements:</li>
	  <ul>
	    <li>Support for interrupt to CPU binding (including
	      GICv3/ITS backends)</li>
	  </ul>
      </ul>

      <p>This work is integrated to &os; HEAD on an on-going
	basis.</p>
    </body>

    <sponsor>Cavium</sponsor>

    <sponsor>Semihalf</sponsor>

    <help>
      <task>
	<p>Add support for multi-Queue Set operation in VNIC.</p>
      </task>
    </help>
  </project>

  <project cat='bin'>
    <title>Updates to GDB</title>

    <contact>
      <person>
	<name>
	  <given>John</given>
	  <common>Baldwin</common>
	</name>
	<email>jhb@FreeBSD.org</email>
      </person>
    </contact>

    <body>
      <p>The new thread target that directly uses <tt>ptrace(2)</tt>
	was committed upstream and included in GDB 7.11.  The port was
	also updated to GDB 7.11.</p>
    </body>

    <help>
      <task>
	<p>Figure out why the powerpc kgdb targets are not able to
	  unwind the stack past the initial frame.</p>
      </task>

      <task>
	<p>Add support for more platforms (arm, mips, aarch64) to
	  upstream gdb for both userland and kgdb.</p>
      </task>

      <task>
	<p>Add support for debugging powerpc vector registers.</p>
      </task>

      <task>
	<p>Add support for catching system calls.</p>
      </task>

      <task>
	<p>Add support for <tt>&dollar;_siginfo</tt>.</p>
      </task>

      <task>
	<p>Add support for ELF auxv data via <tt>info auxv</tt>.</p>
      </task>

      <task>
	<p>Implement <tt>info os</tt> commands.</p>
      </task>

      <task>
	<p>Implement <tt>gdbserver</tt> for FreeBSD.</p>
      </task>
    </help>
  </project>

  <project cat='bin'>
    <title>Native PCI-express HotPlug</title>

    <contact>
      <person>
	<name>
	  <given>John</given>
	  <common>Baldwin</common>
	</name>
	<email>jhb@FreeBSD.org</email>
      </person>
    </contact>

    <links>
      <url href="https://github.com/bsdjhb/freebsd/tree/pci_hp">Native PCI-express HotPlug Support</url>
    </links>

    <body>
      <p>A new implementation of support for native PCI-express
	hotplug is present at the URL above.  Much of the new code
	lives in the PCI-PCI bridge driver to handle hotplug events
	and manage the PCI-express slot registers.  Additional changes
	in the branch include adding new <tt>rescan</tt> and
	<tt>delete</tt> commands to <tt>devctl(8)</tt>, as well as
	support for rescanning PCI busses.</p>

      <p>The current implementation has been tested on systems with
	ExpressCard slots but could use additional testing, especially on
	systems with other PCI-express HotPlug features such as
	mechanical latches, attention buttons, indicators, and so
	on.</p>
    </body>

    <help>
      <task>
	<p>Split the branch into separate logical changes as commit
	  candidates.</p>
      </task>

      <task>
	<p>Additional testing.</p>
      </task>
    </help>
  </project>

  <project cat='ports'>
    <title>KDE on &os;</title>

    <contact>
      <person>
	<name>KDE on &os; team</name>
	<email>kde@FreeBSD.org</email>
      </person>
    </contact>

    <links>
      <url href="https://freebsd.kde.org/">KDE on FreeBSD Website</url>
      <url href="https://freebsd.kde.org/area51.php">Experimental KDE Ports Staging Area</url>
      <url href="https://wiki.FreeBSD.org/KDE">KDE on FreeBSD Wiki</url>
      <url href="https://mail.kde.org/mailman/listinfo/kde-freebsd">KDE/FreeBSD Mailing List</url>
      <url href="http://src.mouf.net/area51/log/branches/plasma5">Development Repository for Integrating KDE Frameworks 5 and Plasma 5</url>
    </links>

    <body>
      <p>The KDE on &os; team focuses on packaging and making sure
	that the experience of KDE and Qt on &os; is as good as
	possible.</p>

      <p>While the list of updates is shorter than that for the
	previous quarter, the team remained busy and work on KDE
	Frameworks 5 and Plasma 5 continues.</p>

      <p>Tobias Berner, who has been driving our KDE Frameworks 5 and
	Plasma 5 efforts from the beginning, received a KDE commit
	bit, and has been putting it to good use by upstreaming
	FreeBSD across several KDE repositories.  Another team
	highlight in the beginning of this year is the (re)addition of
	another committer to our experimental repository: Adriaan de
	Groot, a longtime KDE contributor who also used to work on KDE
	and &os; almost a decade ago when our team was first
	formed.  Welcome back, Ade!</p>

      <p>The following big updates were landed in the ports tree this
	quarter.  In many cases, we have also contributed patches to
	the upstream projects.</p>

      <ul>
	<li>CMake 3.4.2 and 3.5.0</li>

	<li>Calligra 2.9.11, the latest release of the integrated work
	  applications suite.  We have managed to keep in sync with
	  the upstream releases since 2.9.10.</li>

	<li>KDE Telepathy was updated to 0.9.0 and Telepathy-Qt4 was
	  updated to 0.9.6.1, the latest upstream releases.</li>

	<li>The Qt 5 ports were finally updated to 5.5.1, which were
	  the latest stable version at the time.</li>

	<li>The first commit preparing the groundwork for KDE
	  Frameworks 5 and Plasma 5
	  <a href="https://svnweb.freebsd.org/changeset/ports/411156">was
	    landed to the ports tree</a>.</li>
      </ul>

      <p>Work on Qt 5.6.0 is
	under way in our experimental repositories.  At
	the time of this writing, it also contains KDE Frameworks 5.20.0,
	Plasma 5.6.1, and KDE Applications 16.03.80.</p>

      <p>Users interested in testing those ports are encouraged to
	follow the instructions in
	<a href="https://freebsd.kde.org/area51.php">our website</a>
	and report their results to our mailing list.  Qt5 5.6.0 is in
	our <tt>qt-5.6</tt> branch, and Plasma 5 and the rest is in
	the <tt>plasma5</tt> branch.</p>
    </body>

    <help>
      <task>
	<p>Land the KDE Frameworks 5 and Plasma 5 ports to the
	  tree.</p>
      </task>

      <task>
	<p>Commit the DigiKam 4.14.0 update currently being worked on
	  in our experimental repository.</p>
      </task>
    </help>
  </project>

  <project cat='proj'>
    <title>Process-Shared Locks for <tt>libthr</tt></title>

    <contact>
      <person>
	<name>
	  <given>Konstantin</given>
	  <common>Belousov</common>
	</name>

	<email>kib@FreeBSD.org</email>
      </person>
    </contact>

    <body>
      <p>POSIX specifies several kinds of <tt>pthread</tt> locks.  For
	this report, the private and process-shared variants are
	considered.  Private locks can be used only by the threads of
	the same process, which share a single common address space.
	Process-shared locks can be used by threads from any process,
	assuming the process can map the lock memory into its address
	space.</p>

      <p>Our <tt>libthr</tt>, the library implementing the POSIX
	threads and locking operations, uses a pointer as the internal
	representation behind a lock.  The pointer contains the
	address of the actual structure carrying the lock.  This has
	unfortunate consequences for implementing the
	<tt>PTHREAD_PROCESS_SHARED</tt> attribute for locks, since
	really only the pointer is shared when a lock is mapped into
	distinct address spaces.</p>

      <p>A common opinion was that we have no choice but to break the
	<tt>libthr</tt> Application Binary Interface (ABI) by changing
	the lock types to be the actual lock structures (and padding
	for future ABI extension).  This is very painful for users, as
	our previous experience with non-versioned <tt>libc</tt> and
	<tt>libc_r</tt> has shown.</p>

      <p>Instead, I proposed and implemented a scheme where
	process-shared locks can be implemented without breaking the
	ABI.  The lock memory is used as a key into a system-global
	hash of shared memory objects (off-pages), which contain the
	actual lock structures.</p>

      <p>New <tt>umtx</tt> operations to create or look up a shared
	object by memory key were added.  <tt>libthr</tt> is
	modified to look up the object and use it for shared locks,
	instead of using <tt>malloc()</tt> as for private locks.</p>

      <p>The pointer value in the user-visible lock type contains a
	canary for shared locks.  <tt>libthr</tt> detects the canary
	and switches into the shared-lock mode.</p>

      <p>The proposal of inlining the lock structures, besides the
	drawbacks of breaking ABI, has its merits.  Most important,
	the inlining avoids the need for indirection.  Another
	important advantage over the off-page approach is that no
	off-page object needs to be maintained, and the lifecycle of
	the shared lock naturally finishes with the destruction of the
	shared memory, without need for explicit cleanup.  Right now, off-pages
	hook into vm object termination to avoid leakage, but
	long-livedness of the vnode vm object prolongs the off-page's
	existence for shared locks backed by files, however unlikely
	they may be.</p>

      <p><tt>libthr</tt> with inlined locks became informally known as
	the <tt>libthr2</tt> project, since it is better to change the
	library name than just bumping the library version.
	<tt>rtld</tt> should ensure that <tt>libthr</tt> and
	<tt>libthr2</tt> are not simultaneously loaded into a single
	address space.</p>
    </body>

    <sponsor>The FreeBSD Foundation</sponsor>

    <help>
      <task>
	<p>Implement robust mutexes.</p>
      </task>

      <task>
	<p>Evaluate and implement <tt>libthr2</tt>.</p>
      </task>
    </help>
  </project>

  <project cat='team'>
    <title>Cluster Admin</title>

    <contact>
      <person>
	<email>clusteradm@FreeBSD.org</email>
      </person>
    </contact>


    <body>
      <p>This quarter, we:</p>
      <ul>
	<li>migrated services out of the hosting space in ISC
	  (peter, sbruno)</li>

	<li>began migration of services into the RootBSD hosting space
	  (peter, sbruno)</li>

	<li>collaborated with the phabricator admin team to migrate to
	  a new and improved host in NYI. (allanjude, peter,
	  sbruno)</li>

	<li>installed a new and beefier Jenkins machine (gnn, lwshu,
	  sbruno)</li>

	<li>are still looking for more Asian mirrors for pkg, svn, and ftp
	  (Japan, India). (sbruno)</li>

	<li>completed the migration of the Taiwanese mirror to its new location.
	  (lwshu)</li>

	<li>started hosting a clang/llvm buildbbot in the &os; cluster
	  at NYI (sbruno, emaste)</li>

	<li>resolved a UK mirror outage with Bytemark (gavin,
	  peter)</li>
      </ul>
    </body>
  </project>

  <project cat='ports'>
    <title>Obsoleting Rails 3</title>

    <contact>
      <person>
	<name>
	  <given>Torsten</given>
	  <common>Zühlsdorff</common>
	</name>
	<email>ports@toco-domains.de</email>
      </person>
    </contact>


    <body>
      <p>Ruby on Rails is the base for most of the rubygems in the
	Ports Collection.  Currently, versions 3.2 and 4.2 coexist, but since
	Rails 3.2 is running out of support, the time has come to
	switch.</p>

      <p>There is an ongoing progress to remove Rails 3.2 from the
	ports tree.  While many gems already work with the new
	version, there are some exceptions.  For example, www/redmine
	needs a big update (which is currently being tested) because it
	depends on gems that depends on Rails 3.2.</p>

      <p>If you want to help with porting or testing, feel free to contact
	me or the mailinglist <tt>ruby@FreeBSD.org</tt>.</p>
    </body>
  </project>

  <project cat='ports'>
    <title>GitLab Port</title>

    <contact>
      <person>
	<name>
	  <given>Torsten</given>
	  <common>Zühlsdorff</common>
	</name>
	<email>ports@toco-domains.de</email>
      </person>
    </contact>


    <body>
      <p>After nearly a year of work on this project, GitLab 8.5.5 was
	committed into the ports tree.  A big thanks to the enormous
	number of people involved! Since GitLab is a fast-moving
	project, there is also ongoing work to stay in sync with
	upstream.  Have fun!</p>
    </body>
  </project>

  <project cat='misc'>
    <title>FreeBSD Build</title>

    <contact>
      <person>
	<name>
	  <given>Bryan</given>
	  <common>Drewery</common>
	</name>
	<email>bdrewery@FreeBSD.org</email>
      </person>
    </contact>


    <body>
      <p>Build improvements for buildworld on &os; head continue.
	Some highlights include:</p>

      <ul>
	<li><tt>WITH_FAST_DEPEND</tt> was made the default in r296668, and
	  later made the only option in r297434.  The new depend code
	  avoids a <tt>make depend</tt> tree walk and generates
	  <tt>.depend</tt> files during the build as a side-effect of
	  compilation.  This is done by using the <tt>-MF</tt> flags of the
	  compiler.  This speeds up the build by 15-35%.</li>

	<li><a href="http://bugs.freebsd.org/196193">PR 196193</a>:
	  <tt>WITHOUT_CROSS_COMPILER</tt> was fixed to properly use
	  <tt>--sysroot</tt> which allows the option to work in more
	  cases.  It is still unsafe when major compiler upgrades
	  occur.  Further work is planned to improve that still.</li>

	<li><tt>WITHOUT_TOOLCHAIN</tt> now properly builds.</li>
      </ul>
    </body>

    <sponsor>EMC / Isilon Storage Division</sponsor>

    <help>
      <task>
	<p>Opportunistically skipping the bootstrap compiler phase of
	  buildworld.</p>
      </task>

      <task>
	<p>Skipping the <tt>make obj</tt> tree walk.</p>
      </task>

      <task>
	<p>Enabling <tt>WITH_META_MODE</tt> in buildworld to provide a
	  reliable incremental build using <tt>filemon(4)</tt> and
	  <tt>bmake</tt>'s <tt>.MAKE.MODE=meta</tt>.  This should not
	  be confused with <tt>WITH_DIRDEPS_BUILD</tt> which
	  previously was named <tt>WITH_META_MODE</tt> and is a
	  drastically different build system presented at BSDCan 2014
	  by Simon Gerraty.</p>
      </task>
    </help>
  </project>

  <project cat='kern'>
    <title>Filemon Performance/Stability Improvements</title>

    <contact>
      <person>
	<name>
	  <given>Bryan</given>
	  <common>Drewery</common>
	</name>
	<email>bdrewery@FreeBSD.org</email>
      </person>

      <person>
	<name>
	  <given>Mateusz</given>
	  <common>Guzik</common>
	</name>
	<email>mjg@FreeBSD.org</email>
      </person>
    </contact>


    <body>
      <p>Filemon is a kernel module for tracing which files a command
	creates, reads, writes, or executes.  It allows tracking build
	dependencies in combination with <tt>bmake</tt>'s meta mode.
	<tt>bmake</tt> stores filemon's output in a <tt>.meta</tt>
	file along with the build command and later uses this to
	trigger a rebuild of the target if any of the files referenced
	are missing or modified, or if the build command changes.  It
	provides the same functionality as the compiler's <tt>-MF</tt> flag,
	but for everything.  It will be critical for buildworld's
	<tt>WITH_META_MODE</tt> (which is the normal buildworld but
	only using filemon) to provide a reliable incremental build
	without even the need for <tt>.depend</tt> files or compiler
	<tt>-MF</tt> flags.  This allows <tt>-DNO_CLEAN</tt> to work
	all of the time.</p>

      <p>Filemon on -HEAD was improved for stability and performance
	over this quarter.  It no longer causes every syscall it hooks
	into to loop over processes looking for a matching filemon
	struct.  It now just attaches directly to the struct proc with
	its own pointer.  This improves performance by reducing lock
	contention during a build.  Much other work went into
	improving error handling and other stability issues in the
	module as well.</p>

      <p>All of this work was done by Bryan Drewery, sponsored by EMC,
	but much help and identification of bugs was provided by
	Mateusz Guzik.</p>
    </body>

    <sponsor>EMC / Isilon Storage Division</sponsor>

    <help>
      <task>
	<p>Improve credential handling.</p>
      </task>

      <task>
	<p>Improve EVENTHANDLER performance.</p>
      </task>

      <task>
	<p>Possibly provide a framework for syscallenter/syscallret
	  hooking to avoid the need to hook syscalls as Filemon
	  does.</p>
      </task>
    </help>
  </project>

  <project cat='arch'>
    <title>AmigaOne X5000 Support</title>

    <contact>
      <person>
	<name>
	  <given>Justin</given>
	  <common>Hibbits</common>
	</name>
	<email>jhibbits@FreeBSD.org</email>
      </person>
    </contact>

    <links>
      <url href="http://www.amigaos.net/hardware/133/amigaone-x5000" />
    </links>

    <body>
      <p>This project is a continuation of the Book-E QorIQ support
	enhancements by Semihalf dating back to 2012.</p>

      <p>The AmigaOne X5000 series of AmigaOS-compatible systems uses
	the Freescale QorIQ series of SoCs for a desktop-class form
	factor.  The work here entails adding support for the e5500
	core itself, in addition to support for the SoC
	peripherals.</p>

      <p>Currently, most of the code to enable basic support is checked
	in: dTSEC (ethernet), core support (e500mc, e5500).  As part of
	this, <tt>rman</tt>, the kernel resource manager, was enhanced
	to use <tt>uintmax_t</tt> for resources.  This allows devices to
	be physically above the 4GB boundary on 32-bit systems.  With a
	statically compiled device tree, it boots to multiuser mode with
	nfsroot, and can be used as normal (serial and SSH logins once
	configured).</p> </body>

    <sponsor>Alex Perez (Inertial Computing)</sponsor>

    <help>
      <task>
	<p>eSDHC driver: Work has been started on this, hijacking the
	  <tt>imx_sdhc.c</tt> from Ian Lepore, but there are still
	  bugs: missing DMA from the iMX driver, and odd timeouts
	  after the system starts up.</p>
      </task>

      <task>
	<p>SATA support: There is a WIP driver for the SATA
	  controller, but it is currently very slow, about 11MB/s on a
	  SATA 2 link.  It currently relies on a 10ms delay on every
	  SATA transaction for it to be even somewhat
	  stable.  Without this delay, the disk scan never works and I
	  have not yet figured out why.</p>
      </task>

      <task>
	<p>Local console (VGA) support: It currently boots with a
	  serial console.  <tt>vgapci0</tt> is seen if there is a PCIe graphics
	  card, but <tt>vt(4)</tt> does not attach to it yet.</p>
      </task>

      <task>
	<p>64-bit support: The CPU on the board is a P5020, a 64-bit
	  e5500 dual-core SoC.  Currently, booke support in FreeBSD is
	  32-bit only.</p>
      </task>

      <task>
	<p>SMP: SMP support on Book-E hardware is currently
	  broken.</p>
      </task>

      <task>
	<p>U-boot support: Currently this uses a compiled-in device
	  tree, but it would be preferable to use the device
	  tree provided by u-boot, or at least the Linux-compatible
	  device tree.</p>
      </task>

      <task>
	<p>More work is needed on the DPAA front (Datapath
	  Acceleration Architecture) to improve the Ethernet driver
	  and utilize the SEC engine for crypto, <tt>random(4)</tt>,
	  and IPSec.</p>
      </task>
    </help>
  </project>

  <project cat='doc'>
    <title>The FreeBSD German Documentation Project</title>

    <contact>
      <person>
	<name>
	  <given>Björn</given>
	  <common>Heidotting</common>
	</name>
	<email>bhd@FreeBSD.org</email>
      </person>

      <person>
	<name>
	  <given>Benedict</given>
	  <common>Reuschling</common>
	</name>
	<email>bcr@FreeBSD.org</email>
      </person>

      <person>
	<name>
	  <given>Johann</given>
	  <common>Kois</common>
	</name>
	<email>jkois@FreeBSD.org</email>
      </person>
    </contact>

    <links>
      <url href="https://people.freebsd.org/~jkois/FreeBSDde/de/">Homepage of the FreeBSD German Documentation Project</url>
    </links>

    <body>
      <p>The FreeBSD German Documentation Project translates &os;'s
	documentation (handbook, articles, website, etc.) into the
	German language.</p>

      <p>Due to the tireless effort of Björn Heidotting, we made huge
	improvements in catching up with the translation of the German
	handbook.  Benedict helped with reviewing the changes using
	&os;'s review system Phabricator, which helped a lot.  We
	now have the following handbook chapters in sync with the
	latest version in the English tree:</p>

      <ul>
	<li>filesystems</li>

	<li>kernelconfig</li>

	<li>ports</li>

	<li>x11</li>
      </ul>

      <p>We try to keep up the good work, while also looking at new
	ways to translate like the PO/gettext-based system.  We are
	always looking for volunteers who are interested in
	translating small sections or even entire documents.  The
	process is relatively easy and contributors do not have to
	know much to get started.  The members of the FreeBSD German
	Documentation Team are also willing to mentor people who are
	interested in helping out.</p>
    </body>

    <help>
      <task>
	<p>Translate more documents.</p>
      </task>
    </help>
  </project>

  <project cat='bin'>
    <title>ELF Tool Chain Tools</title>

    <contact>
      <person>
	<name>
	  <given>Ed</given>
	  <common>Maste</common>
	</name>
	<email>emaste@FreeBSD.org</email>
      </person>
    </contact>

    <links>
      <url href="http://elftoolchain.sourceforge.net">ELF Tool Chain Web Site</url>
    </links>

    <body>
      <p>The ELF Tool Chain project provides BSD-licensed
	implementations of compilation tools and libraries for
	building and analyzing ELF objects.  The project began as part
	of &os; but later became an independent project to encourage
	wider participation from others in the open-source developer
	community.</p>

      <p>The ELF Tool Chain project released version 0.7.1 in
	February.  We have been tracking snapshots of the upstream
	repository in &os;.
	Having an official release brings the benefit of
	broader testing and visibility within other open source
	projects, even if we do not require it in order to
	update &os;.</p>

      <p>In the first quarter of 2016, the ELF Tool Chain tools were
	updated to a snapshot of upstream Subversion revision 3400, which
	is close to the 0.7.1 release.  Additional bug fixes were
	committed to &os; and subsequently merged into the upstream
	repository.</p>

      <p>ELF Tool Chain's <tt>elfcopy(1)</tt> is now installed as
	<tt>objcopy(1)</tt> by default, as it is a viable replacement
	for the base system and ports tree.</p>

      <p>Significant improvements were made to the
	<tt>elfcopy(1)</tt>, <tt>readelf(1)</tt>, and
	<tt>elfdump(1)</tt> tools, including better MIPS, RISC-V, and
	AArch64 support.</p>
    </body>

    <sponsor>The FreeBSD Foundation</sponsor>

    <help>
      <task>
	<p>Fix issues found by fuzzing inputs to the tools.</p>
      </task>

      <task>
	<p>Add automatic support for separate debug files.</p>
      </task>

      <task>
	<p>Investigate replacement <tt>objdump</tt>, <tt>ld</tt> and
	  <tt>as</tt> implementations.</p>
      </task>
    </help>
  </project>

  <project cat='kern'>
    <title>Infiniband</title>

    <contact>
      <person>
	<name>
	  <given>Hans Petter</given>
	  <common>Selasky</common>
	</name>
	<email>hselasky@FreeBSD.org</email>
      </person>
    </contact>

    <links>
      <url href="https://lists.freebsd.org/pipermail/freebsd-infiniband/2016-March/000190.html">Call for Testing</url>
    </links>

    <body>
      <p>Mellanox is working on a big infiniband update towards
	Mellanox OFED v3.2 of the infiniband stack in &os;.  The
	updates include both userland and kernel components.
	Infiniband patches for &os; are available in the link above
	which can be downloaded and applied to a recent &os;-head
	checkout.</p>
    </body>

    <sponsor>Mellanox Technologies</sponsor>

  </project>

  <project cat='kern'>
    <title>FreeBSD Integration Services (BIS)</title>

    <contact>
      <person>
	<name>
	  <given>Sepherosa</given>
	  <common>Ziehau</common>
	</name>
	<email>sepherosa@gmail.com</email>
      </person>

      <person>
	<name>
	  <given>Howard</given>
	  <common>Su</common>
	</name>
	<email>howard0su@gmail.com</email>
      </person>

      <person>
	<name>
	  <given>Hongjiang</given>
	  <common>Zhang</common>
	</name>
	<email>honzhan@microsoft.com</email>
      </person>

      <person>
	<name>
	  <given>Dexuan</given>
	  <common>Cui</common>
	</name>
	<email>decui@microsoft.com</email>
      </person>
    </contact>

    <links>
      <url href="https://wiki.FreeBSD.org/HyperV">FreeBSD Virtual Machines on Microsoft Hyper-V</url>
      <url href="https://technet.microsoft.com/en-us/library/dn531030.aspx">Supported Linux and FreeBSD Virtual Machines for Hyper-V on Windows</url>
    </links>

    <body>
      <p>When &os; virtual machines (VMs) run on Hyper-V, using
	Hyper-V synthetic devices is recommended to get the best
	network and storage performance and make full use of all the
	benefits that Hyper-V provides.  The collection of drivers
	that are required to use Hyper-V synthetic devices in &os;
	are known as FreeBSD Integration Services (BIS).  Some of the
	BIS drivers (like network and storage drivers) have existed in
	FreeBSD 9.x and 10.x for years, but there are still some
	performance and stability issues and bugs.  Compared with
	Windows and Linux VMs, the current BIS lacks some useful
	features, e.g., live virtual machine backup, TRIM/Unmap, the
	support for UEFI VMs (boot from UEFI), etc.</p>

      <p>During the past quarter, we made a great progress on the
	performance tuning for Hyper-V network driver.  We also
	refactored and cleaned up the VMBus driver, and fixed some
	important bugs.  All the work makes &os; VMs run even
	better on Hyper-V and the Hyper-V based cloud platform
	Azure!</p>

      <p>Our work during 2016Q1 is documented below:</p>

      <p>Optimizing the performance of Hyper-V network driver:</p>

      <ul>
	<li>We added LRO (Large Receive Offloading) support to the
	  driver and properly handle ACK packets.  This
	  effectively reduces the CPU cycles used in the TCP/IP stack
	  and dramatically boosts network performance!</li>

	<li>We enabled vRSS (virtual Receive Side Scaling) support
	  for the driver.  This greatly improved the network
	  performance for SMP virtual machines.</li>

	<li>We used a separate Tx kernel thread to relieve the Rx
	  thread of transmitting packets (the Rx thread tried to
	  transmit packets after receiving ACKs), so the Rx thread can
	  receive packets and send ACKs faster.</li>

	<li>Now we can reach a VM-to-VM throughput of 9.1Gbps on a
	  host with a 10Gbps physical NIC, and over 20Gbps on a host
	  with a 40Gbps NIC, all the while with plenty of CPU cycles
	  left for applications.</li>

	<li>We also enabled IP header checksum offloading, and Rx
	  checksum offloading for UDP.</li>

	<li>Further performance tuning is working in progress.</li>
      </ul>

      <p>Refactoring and cleaning up the VMBus driver code:</p>

      <ul>
	<li>Instead of using <tt>swi</tt> threads directly, we now use per-CPU
	  <tt>taskqueue_create_fast()</tt> threads for event and message
	  handling, making the code more conventional for &os;.</li>

	<li>We did a lot of cleanup to the <tt>hv_utils</tt> code (HeartBeat,
	  TimeSync and Shutdown) and we are further cleaning up the
	  KVP code.</li>

	<li>We used a new message/interrupt slot for the Hyper-V timer, so
	  the handling of timer and non-timer messages can be
	  distinguished, fixing a potential issue.</li>

	<li>Instead of finding an available IDT vector by hacking,
	  we are changing to use the normal method,
	  <tt>lapic_ipi_alloc()</tt>.</li>

	<li>We are modularizing the Hyper-V modules:
	  <ol>
	    <li>they will be loaded in the loader;</li>
	    <li>we are going to enhance <tt>devd(8)</tt> to improve
	      the hot plug case.</li>
	  </ol>
	</li>
      </ul>

      <p>Bug Fixing:</p>

      <ul>
	<li>Fixed the &quot;spurious multiple disks&quot; issue (PR
	  206630 &mdash; &os; 10.2 on Windows 10 and 2016 server may not
	  boot due to multiple invalid disks) in the Hyper-V storage
	  driver and now &os; VMs can reliably boot on Win10 and 2016
	  hosts.</li>

	<li>Fixed the OACTIVE issue (PR 207297 &mdash; [Hyper-V] FreeBSD
	  10.2 on hyperv lost network under heavy load for
	  OACTIVE).</li>

	<li>Fixed a TSC calibration issue (PR 208238 &mdash; [Hyper-V] TSC
	  frequency is not correctly detected: &quot;calcru: runtime went
	  backwards&quot;) and we will not see the &quot;runtime went
	  backwards&quot; messages any more!</li>

	<li>Fixed the &quot;very slow terminal&quot; issue of 11-CURRENT by
	  enabling text mode when we are running on hypervisors.</li>

	<li>Fixed the &quot;unknown dhcp option value 0xf5&quot; issue in
	  <tt>dhclient(8)</tt> by asking <tt>dhclient(8)</tt> to
	  ignore the option, and &os; VMs on Azure can now reliably get
	  IP addresses.</li>

	<li>Found a workaround for PR 20824 ([Hyper-V] VM network may not
	  work over virtual switch based on wireless NIC): add
	  &quot;net.link.ether.inet.max_age=60&quot; in
	  /etc/sysctl.conf.</li>
      </ul>

      <p>We plan to add support for live virtual machine backup,
	TRIM/Unmap, and UEFI VMs (Hyper-V Generation-2 VMs).</p>

      <p>We published errata (FreeBSD-EN-16:04.hyperv,
	FreeBSD-EN-16:05.hv_netvsc) with the Release Engineering team,
	so 10.1 and 10.2 users can easily get the fixes for KVP and TCP
	checksums by upgrading the system.</p>

      <p>We published BIS test cases for Hyper-V on github:
	<a href="https://github.com/FreeBSDonHyper-V/Test-BIS">https://github.com/FreeBSDonHyper-V/Test-BIS</a>
	and we are going to publish the test cases for Azure soon.</p>
    </body>

    <sponsor>Microsoft</sponsor>

  </project>

  <project cat='ports'>
    <title>Ports Collection</title>

    <contact>
      <person>
	<name>
	  <given>Frederic</given>
	  <common>Culot</common>
	</name>
	<email>portmgr-secretary@FreeBSD.org</email>
      </person>

      <person>
	<name>&os; Ports Management Team</name>
	<email>portmgr@FreeBSD.org</email>
      </person>
    </contact>

    <links>
      <url href="http://www.FreeBSD.org/ports/" />
      <url href="http://www.freebsd.org/doc/en_US.ISO8859-1/articles/contributing-ports/" />
      <url href="http://portsmon.freebsd.org/index.html" />
      <url href="http://www.freebsd.org/portmgr/index.html" />
      <url href="http://www.facebook.com/portmgr" />
    </links>

    <body>
      <p>As of the end of Q1, the ports tree holds a bit more
	than 25,000 ports, and the PR count is below 1,900.  The
	activity on the ports tree remains steady, with almost 7,000
	commits performed by around 120 active committers.</p>

      <p>On the problem reports front, the encouraging trend
	observed during the previous quarter is confirmed, with again
	a significant increase in the number of PRs fixed during Q1.
	Indeed, almost 2,400 reports were fixed, which allows us to go
	below the threshold value of 2,000 open PRs.</p>

      <p>In Q1, three commit bits were taken in for safekeeping,
	following an inactivity period of more than 18 months (milki,
	brian), or on committer's request (mmoll).  We had one
	returning committer (fluffy) who had his commit bit
	reinstated.  Two new developers were granted a ports commit
	bit (Olivier Cochard-Labbe and Christoph Moench-Tegeder).</p>

      <p>On the management side, we had the pleasure to welcome miwi
	back to the portmgr team.</p>

      <p>On the QA side, 39 exp-runs were performed to validate
	sensitive updates or cleanups.  The most noticeable change
	might be the removal of the now unneeded
	<tt>&dollar;{PORTSDIR}</tt> when specifying dependencies in
	Makefiles (see the <tt>/usr/ports/CHANGES</tt> entry dated
	20160402).  Amongst other noticeable changes are the update to
	ruby 2.3, ruby-gems to 2.5.1, CMake to 3.5.0, clang to
	3.8.0-r258968, Qt5 to 5.5.1, Gnome to 3.18, boost to 1.60.0,
	the update of libc++ in base to 3.8.0 release, and the
	enabling of LLVM libunwind by default on x86.  The CentOS
	ports were also updated.  Some infrastructure changes included
	the switch from <tt>bsd.gnome.mk</tt> and <tt>bsd.mate.mk</tt>
	to the simpler <tt>Uses/gnome.mk</tt> and
	<tt>Uses/mate.mk</tt>.  Some work was also done to improve
	poudriere builds by reducing dependency calculation and
	general overheads.</p>
    </body>

    <help>
      <task>
	<p>We would like to remind everyone that the ports tree is
	  built and run by volunteers, and any help is greatly
	  appreciated.  A great amount of effort was spent on the
	  ports front in Q1, which allowed us to decrease the number
	  of pending problem reports significantly, as well as on the
	  ports infrastructure.  Many thanks to all who
	  contributed!</p>
      </task>
    </help>
  </project>

  <project cat='proj'>
    <title>Address Space Layout Randomization</title>

    <contact>
      <person>
	<name>
	  <given>Konstantin</given>
	  <common>Belousov</common>
	</name>
	<email>kib@FreeBSD.org</email>
      </person>

      <person>
	<name>
	  <given>Ed</given>
	  <common>Maste</common>
	</name>
	<email>emaste@FreeBSD.org</email>
      </person>
    </contact>

    <links>
      <url href="https://kib.kiev.ua/kib/aslr">Patch Home</url>
      <url href="https://www.kib.kiev.ua/kib/aslr/paxtest.log"><tt>paxtest.log</tt></url>
      <url href="https://www.kib.kiev.ua/kib/aslr/fedora.log"><tt>fedora.log</tt></url>
    </links>

    <body>
      <p>I wrote a small and straightforward yet feature-packed patch
	to implement ASLR for &os; which is now available for broader
	testing.</p>

      <p>With this change, randomization is applied to all non-fixed
	mappings.  By randomization, I mean that the base address for the
	mapping is selected with a guaranteed amount of entropy
	(bits).  If the mapping was requested to be superpage aligned,
	the randomization honors the superpage attributes.</p>

      <p>The randomization is done on a best-effort basis.  That is,
	the allocator falls back to a first fit strategy if
	fragmentation prevents entropy injection.  It is trivial to
	implement a strong mode where failure to guarantee the
	requested amount of entropy results in failure of the mapping
	request failure, but I do not consider that to be usable.</p>

      <p>I have not fine-tuned the amount of entropy injected right
	now, but that is only a quantitive change that will not change the
	implementation.  The current amount is controlled by
	<tt>aslr_pages_rnd</tt>.</p>

      <p>To not spoil coalescing optimizations, to reduce the page
	table fragmentation inherent to ASLR, and to retain
	transient superpage promotion for <tt>malloc</tt>ed
	memory, locality is implemented for anonymous private
	mappings, which are automatically grouped until fragmentation
	kicks in.  The initial location for the anon group range is,
	of course, randomized.  After some additional tuning, the
	measures appeared to be quite effective.  In particular, a
	very address-space-hungry build of PyPy 5.0 on i386
	successfully finished with the most aggressive functionality
	of the patch activated.</p>

      <p>The default mode keeps the <tt>sbrk</tt> area unpopulated by
	other mappings, but this can be turned off, which gives much
	more breathing room on the small address-space architectures
	(it is funny that
	32 bits is now considered small).  This is tied with the question
	of following an application's hint about the <tt>mmap(2)</tt>
	base address.  Testing shows that ignoring the hint does not
	affect the function of common applications, but I would expect that
	more demanding code could break.  By default <tt>sbrk</tt> is
	preserved and <tt>mmap</tt> hints are satisfied, which can be
	changed by using the <tt>kern.elf{32,64}.aslr_care_sbrk</tt>
	sysctls (currently enabled by default for wider testing).</p>

      <p>Stack gap, W^X, shared page randomization, KASLR and other
	techniques are explicitly out of scope for this work.</p>

      <p>The <tt>paxtest</tt> results for the run with the previous
	version 5 of the patch applied and aggressively tuned can be
	seen at
	<a href="https://www.kib.kiev.ua/kib/aslr/paxtest.log"><tt>paxtest.log</tt></a>.
	For comparison, a run on Fedora 23 on the same machine is at
	<a href="https://www.kib.kiev.ua/kib/aslr/fedora.log"><tt>fedora.log</tt></a>.</p>

      <p>ASLR is enabled on a per-ABI basis, and currently is only
	enabled on native i386 and amd64 (including compat 32-bit) and
	ARMv6 ABIs.  I expect to test and enable ASLR for arm64 as
	well, later.</p>

      <p>A <tt>procctl(2)</tt> control for ASLR is implemented, but
	I have not provided a userspace wrapper around the syscall.
	In fact, the most reasonable control needed is per-image and
	not per-process, but we have no tradition to put the
	kernel-read attributes into the extattrs of a binary, so I am
	still pondering that part and this also explains the
	non-written tool.</p>

      <p>Thanks to Oliver Pinter and Shawn Webb of the HardenedBSD
	project for pursuing ASLR for &os;.  Although this work is
	not based on theirs, it was inspired by their efforts.</p>

      <p>Thanks to Ed Maste, Robert Watson, John Baldwin, and Alan Cox
	for some discussions about the patch, and for The FreeBSD
	Foundation for directing me.</p>

      <p>Bartek Rutkowski tested PyPy builds on i386, and David Naylor
	helped with the port which was at the point of turbulence and
	upgrade during the work.</p>
    </body>

    <sponsor>The FreeBSD Foundation</sponsor>
  </project>

  <project cat='proj'>
    <title>RCTL Disk IO Limits</title>

    <contact>
      <person>
	<name>
	  <given>Edward Tomasz</given>
	  <common>Napierała</common>
	</name>
	<email>trasz@FreeBSD.org</email>
      </person>
    </contact>


    <body>
      <p>An important missing piece of the RCTL resource limits
	framework was the ability to limit file system throughput.
	This project aims to fill that hole by making it possible to
	add RCTL rules for read bytes per second (BPS), write BPS,
	read I/O operations per second (IOPS), and write IOPS, and
	adding a new throttling mechanism to slow down offending
	processes when a limit gets hit.</p>

      <p>The code has been committed and will ship with &os;
	11.0-RELEASE.</p>
    </body>

    <help>
      <task>
	<p>Additional testing</p>
      </task>

      <task>
	<p>Simplify locking, getting rid of <tt>rctl_lock</tt> altogether</p>
      </task>

      <task>
	<p>Improve statistics gathering by making it possible for
	  <tt>rctl -u</tt> to retrieve usage counters at a fixed point
	  in time</p>
      </task>

      <task>
	<p>Use the new throttling mechanism for %CPU limits</p>
      </task>
    </help>

    <sponsor>The FreeBSD Foundation</sponsor>
  </project>

  <project cat='misc'>
    <title>Qt 5.6 on Raspberry Pi</title>

    <contact>
      <person>
	<name>
	  <given>Oleksandr</given>
	  <common>Tymoshenko</common>
	</name>
	<email>gonzo@FreeBSD.org</email>
      </person>
    </contact>

    <links>
      <url href="http://kernelnomicon.org/?p=598">Qt 5.6 on FreeBSD/Pi</url>
    </links>

    <body>
      <p>Qt 5.6 is a great framework for building embedded GUI
	applications, so when Qt 5.6 was released it was natural to
	bring it up on the Raspberry Pi.  The current Qt support in ports is
	very Xorg-centric, so as a proof of concept I created an
	experimental <tt>qt56-base</tt> and <tt>qt56-multimedia</tt>.</p>

      <p><tt>qt56-base</tt> can be configured for a generic ARM device with the
	<tt>scfb</tt> video driver, and specifically for Raspberry Pi in which
	case it supports EGLFS mode with hardware OpenGL
	acceleration.</p>
    </body>

    <help>
      <task>
	<p>Check how embedded use cases can be fit into the current
	  <tt>bsd.qt.mk</tt> or whether a new port should be
	  introduced.</p>
      </task>
    </help>
  </project>

  <project cat='kern'>
    <title>FDT Overlay Support in UBLDR</title>

    <contact>
      <person>
	<name>
	  <given>Oleksandr</given>
	  <common>Tymoshenko</common>
	</name>
	<email>gonzo@FreeBSD.org</email>
      </person>
    </contact>

    <links>
      <url href="https://reviews.freebsd.org/D3180"><tt>ubldr</tt> Patch</url>
    </links>

    <body>
      <p>A flattened device tree is a way to keep the hardware
	description separated from code.  During the boot process, the
	loader passes a pointer to the device-tree blob to the kernel
	and the kernel instantiates and attaches drivers according to
	the information in the blob.</p>

      <p>This approach does not work when the hardware is expandable.  For
	example, the Raspberry Pi and Beaglebone Black have the
	concept of capes or shields: snap-on PCBs that are connected
	to IO headers on the main board and provide additional
	functionality like an LCD screen or GPS receiver.  These
	shields can be described by their own device trees and these
	trees can be overlaid on the base tree by the boot loader,
	thus providing an accurate description to the kernel.</p>

      <p>The proposed patch adds this functionality to <tt>ubldr</tt>.  The user
	can specify a comma-separated list of overlays to U-Boot or
	the loader <tt>fdt_overlays</tt> variable and <tt>ubldr</tt> will load
	them from the <tt>/boot/dtb/</tt> directory and do the
	overlaying.</p>
    </body>
  </project>

  <project cat='kern'>
    <title>MMC Stack Under CAM Framework</title>

    <contact>
      <person>
	<name>
	  <given>Ilya</given>
	  <common>Bakulin</common>
	</name>
	<email>ilya@bakulin.de</email>
      </person>
    </contact>

    <links>
      <url href="https://bakulin.de/freebsd/mmccam.html">Project Information</url>
      <url href="https://github.com/kibab/FreeBSD/tree/mmccam">Source Code</url>
      <url href="https://reviews.FreeBSD.org/D4761">Patch for Review</url>
    </links>

    <body>
      <p>The goal of this project is to reimplement the existing
	MMC/SD stack using the CAM framework.  This will permit
	utilizing the well-tested CAM locking model and debugging
	features.  It will also be possible to process interrupts
	generated by the inserted card, which is a prerequisite for
	implementing the SDIO interface.  SDIO support is necessary
	for communicating with the WiFi/BT modules found on many
	development boards, like Wan Raspberry Pi 3.</p>

      <p>Another feature that the new stack will have is support for
	sending SD commands from userland applications using
	<tt>cam(3)</tt>.  This will allow for building device drivers in
	userland and make debugging much easier.</p>

      <p>The first version of the code was uploaded to Phabricator for
	review.  The new stack is able to attach to the SD card and
	bring it to an operational state so it is possible to read and
	write to the card.</p>

      <p>Support for the <tt>imx_sdhci</tt> SD Host Controller (used
	on iMX-based boards, for example Wandboard) was added in
	2016Q1, along with <tt>ti_sdhci</tt>, which is used on the
	BeagleBone Black.  Modifying other SDHCI-compliant drivers
	should not be difficult.</p>
    </body>

    <help>
      <task>
	<p>Modify the SDHCI driver on at least one x86 platform.  This
	  will make development and collaboration easier.</p>
      </task>

      <task>
	<p>Begin implementing SDIO-specific bits.</p>
      </task>
    </help>
  </project>

  <project cat='team'>
    <title>The &os; Core Team</title>

    <contact>
      <person>
	<name>&os; Core Team</name>
	<email>core@FreeBSD.org</email>
      </person>
    </contact>

    <body>
      <p>During the first quarter of 2016, the most important business
	of the &os; Core Team has been to respond to the harassment
	incident last year.  Core's actions were to assemble a
	timeline of the events and in the light of that to review
	Core's actions at the time; and to make recommendations about
	how better to handle such cases in future.  During this
	process, draft reports were reviewed by people concerned in
	the case and in addition a number of interested members of the
	&os; community.  Core would like to thank everyone involved
	for their contributions.</p>

      <p>The report was published to the &os; developer community in
	mid-February, and contained six recommendations for the
	community to consider.</p>

      <p>Core is also coordinating with the committee headed by Anne
	Dickison who are reviewing the Code of Conduct.  A corpus of
	case studies is being assembled, which will be re-examined to
	see what impact changes to the Code of Conduct would have
	had.</p>

      <p>Core, together with John Baldwin, are working on a plan to
	create a separate repository containing GPLv3 toolchain
	components.  This will allow modernization of code within base
	beyond what the existing GPLv2 toolchain can handle, and
	permit support of certain new architectures where a copyfree
	licensed alternative (i.e., LLVM) is not yet available.  A
	position paper will soon be circulated to developers for
	comment.</p>

      <p>During this quarter three new commit bits were issued, and
	one was returned for safekeeping.  Please welcome Wojciech
	Macek, Jared McNeil and Stanislav Galabov, and bid farewell to
	Davide Italiano, who although too busy to work on FreeBSD
	directly, will still be contributing through his work upstream
	on lld and other parts of the toolchain.</p>
    </body>
  </project>

  <project cat='bin'>
    <title>Using <tt>lld</tt>, the LLVM Linker, to Link
      FreeBSD</title>

    <contact>
      <person>
	<name>
	  <given>Rafael</given>
	  <common>Espíndola</common>
	</name>
	<email>rafael.espindola@gmail.com</email>
      </person>

      <person>
	<name>
	  <given>Davide</given>
	  <common>Italiano</common>
	</name>
	<email>davide@FreeBSD.org</email>
      </person>

      <person>
	<name>
	  <given>Ed</given>
	  <common>Maste</common>
	</name>
	<email>emaste@FreeBSD.org</email>
      </person>
    </contact>

    <links>
      <url href="https://wiki.freebsd.org/LLD">&os; <tt>lld</tt> Wiki Page</url>
      <url href="http://lists.llvm.org/pipermail/llvm-dev/2016-March/096449.html">Status Report on Linking FreeBSD/amd64 with <tt>lld</tt></url>
    </links>

    <body>
      <p><tt>lld</tt> is the linker in the LLVM family of projects.
	It is intended to be a high-performance linker and supports
	the ELF, COFF and Mach-O object formats.  Where possible,
	<tt>lld</tt> maintains command-line and functional
	compatibility with existing linkers (GNU BFD <tt>ld</tt> and
	<tt>gold</tt>), but <tt>lld</tt>'s authors are not constrained
	by strict compatibility where it would hamper performance or
	desired functionality.</p>

      <p>The upstream <tt>lld</tt> project made significant progress
	in adding new functionality to <tt>lld</tt>'s ELF support over
	the first quarter of 2016.  The <tt>lld</tt> ELF linker is
	capable of self-hosting on FreeBSD/amd64 and is capable of
	linking many test applications.</p>

      <p>Highlights of upstream development over the quarter include:
	<ul>
	  <li><tt>lld</tt> gained Link Time Optimization (LTO) support
	    and is able to link Clang with LTO</li>
	  <li>The relocation code has been overhauled for better
	    maintainability</li>
	  <li>Improvements to linker script support, including better
	    diagnostics</li>
	  <li>Many bug fixes in x86_64, AArch64, and MIPS support</li>
	</ul></p>

      <p><tt>lld</tt> currently lacks comprehensive linker script
	expression evaluation support, and therefore cannot yet be
	used to link the &os; kernel.  It also lacks versioned
	symbol support, and does not implement some options used in
	the &os; boot loader components.</p>

      <p>Ed has been running experimental world builds of
	FreeBSD/amd64 with <tt>lld</tt> installed in place of
	<tt>ld.bfd</tt> as the linker.  With workarounds for the
	current gaps in functionality (using the
	<tt>WITHOUT_SYMVER</tt> option to disable symbol versioning
	use, and linking the loader components with GNU <tt>ld</tt>),
	<tt>lld</tt> is now able to link a working FreeBSD
	userland.</p>
    </body>

    <partialsponsor>The &os; Foundation</partialsponsor>

    <help>
      <task>
	<p>Enable the <tt>lld</tt> option by default in the llvm-devel
	  (and later llvm) ports for testing.</p>
      </task>

      <task>
	<p>Develop symbol version support and linker script expression
	  improvements in the upstream lld project.</p>
      </task>

      <task>
	<p>Add or improve support for the remaining &os;
	  architectures.</p>
      </task>

      <task>
	<p>Import a newer lld snapshot into the vendor area, add build
	  infrastructure and connect it to the world build, installed
	  as <tt>ld.lld</tt>.</p>
      </task>

      <task>
	<p>Request a ports exp-run with <tt>/usr/bin/ld</tt> a symlink
	  to <tt>ld.lld</tt>.</p>
      </task>

      <task>
	<p>Extensive testing.</p>
      </task>
    </help>
  </project>

  <project cat='proj'>
    <title>Ceph on FreeBSD</title>

    <contact>
      <person>
	<name>
	  <given>Willem Jan</given>
	  <common>Withagen</common>
	</name>
	<email>wjw@digiware.nl</email>
      </person>
    </contact>

    <links>
      <url href="http://ceph.com">Ceph Main Site</url>
      <url href="https://github.com/ceph/ceph">Main Repository</url>
      <url href="https://github.com/wjwithagen/ceph">My Fork</url>
      <url href="https://github.com/ceph/ceph/pull/7573">The <tt>git pull</tt> with All Changes</url>
    </links>

    <body>
      <p>Ceph is a distributed object store and file system designed
	to provide excellent performance, reliability and
	scalability.</p>

      <ul>
	<li>
	  <p>Object Storage</p>

	  <p>Ceph provides seamless access to objects using native
	    language bindings or <tt>radosgw</tt>, a REST interface that is
	    compatible with applications written for S3 and Swift.</p>
	</li>

	<li>
	  <p>Block Storage</p>

	  <p>Ceph's RADOS Block Device (RBD) provides access to block
	    device images that are striped and replicated across the
	    entire storage cluster.</p>
	</li>

	<li>
	  <p>File System</p>

	  <p>Ceph provides a POSIX-compliant network file system that
	    aims for high performance, large data storage, and maximum
	    compatibility with legacy applications.</p>
	</li>
      </ul>

      <p>I started looking into Ceph, because the HAST solution with
	CARP and <tt>ggate</tt> did not really do what I wanted.  But
	I am aiming for running a Ceph storage cluster of storage
	nodes that are running ZFS.  The end station would be running
	<tt>bhyve</tt> on RBD disk that are stored in Ceph.</p>

      <p>The &os; build will build most of the tools in Ceph.  Note
	that the RBD-dependent items will not work since &os; does
	not have RBD yet.</p>

      <p>Compiling and building Ceph is tested on 11-CURRENT.  It uses
	the Clang toolset that is available, which needs to be at
	least 3.7.  Clang 3.4 (on 10.2-STABLE) does not have all the
	required capabilities to compile everything.</p>

      <p>This setup will get things running for &os;:</p>

      <ul>
	<li>
	  <p>Install <tt>bash</tt> and link it in <tt>/bin</tt> (requires root
	    privileges):</p>

	  <p><tt>sudo pkg install bash</tt></p>

	  <p><tt>sudo ln -s /usr/local/bin/bash /bin/bash</tt></p>
	</li>

	<li>
	  <p>Building Ceph</p>

	  <p><tt>git clone https://github.com/wjwithagen/ceph.git</tt></p>

	  <p><tt>cd ceph</tt></p>

	  <p><tt>git checkout wip-wjw-freebsd-tests</tt></p>

	  <p><tt>./do_freebsd.sh</tt></p>
	</li>
      </ul>

      <p>Parts Not Yet Included:</p>

      <ul>
	<li>
	  <p>RBD</p>

	  <p>Rados Block Devices is implemented in the Linux kernel.
	    It seems that there used to be a userspace implementation
	    first.  And perhaps <tt>ggated</tt> could be used as a
	    template since it does some of the same functions, other
	    than just between two disks.  And it has a userspace
	    counterpart.</p>
	</li>

	<li>
	  <p>BlueStore</p>

	  <p>&os; and Linux have a different AIO API, and that
	    needs to be made compatible.  Next to that is the
	    discussion in &os; about <tt>aio_cancel</tt> not
	    working for all device types.</p>
	</li>

	<li>
	  <p>CephFS</p>

	  <p>Cython tries to access an internal field in dirent which
	    does not compile.</p>
	</li>
      </ul>

      <p>Tests that verify the correct working of the above are also
	excluded from the test set.</p>

      <p>Tests Not Yet Included:</p>

      <ul>
	<li>
	  <p><tt>ceph-detect-init/run-tox.sh</tt></p>

	  <p>Because the current implementation does not know anything
	    about &os;'s rc/init.</p>
	</li>

	<li>
	  <p>Tests that make use of <tt>nosestests</tt></p>

	  <p>Calling these does not really work since
	    <tt>nosetests</tt> is not in <tt>/usr/bin</tt>, and
	    calling through <tt>/usr/bin/env nosetests</tt> does not
	    work on FreeBSD.</p>
	</li>

	<li>
	  <p><tt>test/pybind/test_ceph_argparse.py</tt></p>
	</li>

	<li>
	  <p><tt>test/pybind/test_ceph_daemon.py</tt></p>
	</li>
      </ul>

      <p>Things To Investigate:</p>

      <ul>
	<li>
	  <p><tt>ceph-{osd,mon}</tt> need two signals before they
	    actually terminate.</p>
	</li>

	<li>
	  <p><tt>ceph_erasure_code --debug-osd 20 --plugin_exists jerasure</tt>
	    crashes due to SIGSEGV.  This is a pointer reference that
	    gets modified outside the regular programflow.  Probably
	    due to a programming error but perhaps wrong mixing and
	    matching of many libraries.</p>
	</li>
      </ul>
    </body>

    <help>
      <task>
	<p>The current and foremost task is to get the test set to
	  complete without errors.  This includes fixing several
	  coredumps.</p>

	<p>Run integration tests to see if the &os; daemons will
	  work with a Linux Ceph platform.</p>
      </task>

      <task>
	<p>Get the Python tests that are currently excluded to work,
	  and test OKE.</p>
      </task>

      <task>
	<p>Compile and test the user space RBD (Rados Block
	  Device).</p>

	<p>Investigate and see if an in-kernel RBD device could be
	  developed akin to <tt>ggate</tt>.</p>
      </task>

      <task>
	<p>Integrate the &os; <tt>/etc/rc.d</tt> init scripts in
	  the Ceph stack for testing and running Ceph on production
	  machines.</p>
      </task>
    </help>
  </project>

  <project cat='ports'>
    <title>GNOME on FreeBSD</title>

    <contact>
      <person>
	<name>FreeBSD GNOME Team</name>
	<email>freebsd-gnome@FreeBSD.org</email>
      </person>
    </contact>

    <links>
      <url href="http://www.FreeBSD.org/gnome">FreeBSD GNOME Website</url>
      <url href="https://github.com/FreeBSD/freebsd-ports-gnome">Development Repository</url>
      <url href="https://wiki.gnome.org/Projects/Jhbuild/FreeBSD">Upstream Build Bot</url>
      <url href="https://www.FreeBSD.org/doc/en_US.ISO8859-1/books/porters-handbook/using-gnome.html">USE_GNOME Porter's Handbook Chapter</url>
    </links>

    <body>
      <p>The FreeBSD GNOME Team maintains the GNOME, MATE, and
      CINNAMON desktop environments and graphical user interfaces for
      &os;.  GNOME 3 is part of the GNU Project.  MATE is a fork of
      the GNOME 2 desktop.  CINNAMON is a desktop environment using
      GNOME 3 technologies but with a GNOME 2 look and feel.</p>

      <p>This quarter, GNOME 3.18 and MATE 1.12 were committed to the
	ports tree.</p>

      <p>The <tt>bsd.gnome.mk</tt> and <tt>bsd.mate.mk</tt> frameworks
	were replaced by the simpler <tt>Uses/gnome.mk</tt> and
	<tt>Uses/mate.mk</tt> style.</p>
    </body>

    <help>
      <task>
	<p>Tracking MATE 1.13, the development version that will
	  become MATE 1.14.</p>
      </task>

      <task>
	<p>Work started on porting GNOME 3.20.</p>
      </task>

      <task>
	<p>We have Cinnamon 2.8 in our development tree, but we do not
	  have the time to properly test and fix the issues before
	  this Cinnamon can be committed to ports.  Interested in
	  helping or taking maintainership of Cinnamon?  Please let us
	  know.</p>
      </task>
    </help>
  </project>

  <project cat='misc'>
    <title>The FreeBSD Foundation</title>

    <contact>
      <person>
	<name>
	  <given>Deb</given>
	  <common>Goodkin</common>
	</name>
	<email>deb@FreeBSDFoundation.org</email>
      </person>
    </contact>

    <links>
      <url href="https://www.freebsdfoundation.org/">FreeBSD Foundation Site</url>
      <url href="https://www.freebsdfoundation.org/donors/">Donors</url>
      <url href="https://www.freebsdfoundation.org/what-we-do/education-advocacy/">Education and Advocacy Materials</url>
      <url href="https://www.freebsdfoundation.org/blog/faces-of-freebsd-2016-scott-long/">Faces of FreeBSD: Scott Long</url>
      <url href="https://www.freebsdfoundation.org/blog/faces-of-freebsd-2016-sean-bruno/">Faces of FreeBSD: Sean Bruno</url>
      <url href="https://www.freebsdfoundation.org/blog/freebsd-and-zfs/">The Longstanding Relationship Between FreeBSD and ZFS</url>
      <url href="https://www.freebsdfoundation.org/blog/initial-freebsd-risc-v-architecture-port-committed/">FreeBSD RISC-V Work</url>
      <url href="http://www.mellanox.com/page/press_release_item?id=1688">Mellanox's Work with NetFlix</url>
      <url href="https://chemnitzer.linux-tage.de/2016/de/programm/beitrag/194">FreeBSD – The Power to Serve a Community</url>
      <url href="https://www.freebsdfoundation.org/blog/introducing-a-new-look-for-the-foundation/">The FreeBSD Foundation's New Look</url>
    </links>

    <body>
      <p>The FreeBSD Foundation is a 501(c)(3) non-profit organization
	dedicated to supporting and promoting the FreeBSD Project and
	community worldwide.  Funding comes from individual and
	corporate donations and is used to fund and manage development
	projects, conferences and developer summits, and provide
	travel grants to FreeBSD developers.  The Foundation purchases
	hardware to improve and maintain &os; infrastructure and
	publishes &os; white papers and marketing material to
	promote, educate, and advocate for the FreeBSD Project.  The
	Foundation also represents the FreeBSD Project in executing
	contracts, license agreements, and other legal arrangements
	that require a recognized legal entity.</p>

      <p>Here are some highlights of what we did to help &os; last
	quarter:</p>

      <p>Fundraising Efforts</p>

      <p>We raised $204,000 last quarter from individual and corporate
	donors.  Thank you to everyone who made a donation this year!
	The
	<a href="https://www.freebsdfoundation.org/donors/">list of donors</a>
	is available.</p>

      <p>OS Improvements</p>

      <p>The Foundation improves &os; by funding software
	development projects approved through our proposal submission
	process, and our three software developer staff members.  Two
	Foundation-funded projects were started last quarter, the
	first to improve the stability of the vnet network stack
	virtualization infrastructure, and the second for phase two of
	the FreeBSD/arm64 port project.</p>

      <p>Foundation staff members were responsible for many changes
	over the quarter.  Some notable items include process-shared
	pthread locks, address mapping randomization, disk I/O
	bandwidth limits, porting <tt>libunwind</tt> to FreeBSD/arm,
	bug fixes in the <tt>autofs</tt> automount daemon, an updated
	version of the ELF Tool Chain, investigation of the
	<tt>lld</tt> linker, improved x86 hardware support, and VM
	subsystem stability improvements.  Several of these projects
	are described elsewhere in this quarterly report.</p>

      <p>Release Engineering</p>

      <p>Foundation employee and release engineer Glen Barber worked
	on packaging the base system with <tt>pkg(8)</tt>, separating
	debug files from the default base system so they can be
	selected or deselected during an install, supporting
	preparations, testing for the on-time release of &os;
	10.3, and producing 11-CURRENT and 10-STABLE snapshot
	builds.</p>

      <p>&os; Advocacy</p>

      <p>Anne Dickison, our Marketing Director, focused on creating
	and updating marketing material to promote and teach people
	about &os;.
	<a href="https://www.freebsdfoundation.org/what-we-do/education-advocacy/">This material is available</a>
	for &os; advocates to hand out at conferences and events to
	promote &os;.  She also worked on promoting &os; work
	being done over social media, blog posts, and articles.</p>

      <p>Last quarter, we continued our Faces of FreeBSD series by
	publishing stories about
	<a href="https://www.freebsdfoundation.org/blog/faces-of-freebsd-2016-scott-long/">Scott Long</a>
	and
	<a href="https://www.freebsdfoundation.org/blog/faces-of-freebsd-2016-sean-bruno/">Sean Bruno</a>.
	This is an opportunity to put a face to a name in the &os;
	community and get to know more about the people who
	contribute to &os;.</p>

      <p>Work began on updating the &os; 10.X brochure to
	include the new 10.3 features.</p>

      <p>We love getting stories from companies who are successfully
	using &os;.  Testimonials were received last quarter from
	Chelsio and Acceleration Systems.</p>

      <p>ZFS was making some headlines, so we wrote a blog entry on
	<a href="https://www.freebsdfoundation.org/blog/freebsd-and-zfs/">the
	  longstanding relationship between &os; and ZFS</a>.</p>

      <p>We helped promote
	<a href="https://www.freebsdfoundation.org/blog/initial-freebsd-risc-v-architecture-port-committed/">the
	  &os; RISC-V</a> work being done.</p>

      <p>Assistance was provided to Mellanox for their press release
	highlighting
	<a href="http://www.mellanox.com/page/press_release_item?id=1688">their work with NetFlix</a>.</p>

      <p>Conferences and Events</p>

      <p>The FreeBSD Foundation sponsors many conferences, events, and
	summits around the globe.  These events can be BSD-related,
	open source, or technology events geared towards
	underrepresented groups.  We provide financial support to the
	major BSD conferences like BSDCan, AsiaBSDCon, and EuroBSDCon,
	and give financial and/or other support for smaller events
	like BSDDays, &os; Summits, and &os; workshops, camps,
	and hackathons.  For open source conferences, we will attend
	when we can get a free non-profit booth.</p>

      <p>The year kicked off with sending Ed Maste, Benedict
	Reuschling, and George Neville-Neil to promote and give talks
	on &os; at FOSDEM, the largest open source conference in
	Europe.  Ed, our Project Development Director, had a chance to
	talk to developers from other projects based on &os;, and
	various people about reproducible builds in &os;.</p>

      <p>Dru Lavigne and Deb Goodkin promoted &os; at SCALE in
	Pasadena, California.  Dru gave a presentation called "Doc
	Like an Egyptian."  We were a Gold Sponsor for AsiaBSDCon in
	Tokyo, and five Foundation members attended.  Kirk McKusick
	taught a two-day &os; Kernel tutorial and gave a talk on
	the history of the BSD filesystem.  Dru Lavigne and Benedict
	Reuschling gave a documentation tutorial.  Board members
	Hiroki Sato and George Neville-Neil helped organize the
	conference.  BSDnow.tv interviewed Benedict at AsiaBSDCon
	about his role as a new Foundation board member and the
	Foundation's work.</p>

      <p>We planned and organized our first-ever &os; Storage
	Summit in association with the USENIX FAST Conference.  Led by
	our President and Founder, Justin Gibbs, we had over 50
	attendees participating and working together on technically
	focused topics.  Benedict was busy promoting &os; in
	Europe, where he also attended Linuxtage in Chemnitz, Germany
	to give a talk on &os; (in German):
	<a href="https://chemnitzer.linux-tage.de/2016/de/programm/beitrag/194">FreeBSD &mdash; The Power to Serve a Community</a>.</p>

      <p>The Foundation committed to being a Gold Sponsor for BSDCan
	and the upcoming Hackathon/DevSummit in Essen, Germany in
	April.</p>

      <p>Legal/FreeBSD IP</p>

      <p>The Foundation owns the &os; trademarks, and it is our
	responsibility to protect them.  We continued to review
	requests for permission to use the trademarks.</p>

      <p>&os; Community Engagement</p>

      <p>Code of Conduct &mdash; Anne Dickison, our Marketing Director, has
	been overseeing the efforts to rewrite the Project's Code of
	Conduct to help make this a safe, inclusive, and welcoming
	community.</p>

      <p>We have been reaching out to other open source communities to
	get help with our efforts in making this a diverse community
	and help us achieve our goals mentioned above of making the
	&os; community safe, inclusive, and welcoming.</p>

      <p>Continuing with our diversity efforts, we have been
	connecting with women in technology groups to work on how we
	can recruit more women to &os; and offer Intro to &os;
	workshops.</p>

      <p>Meetings were held with a number of commercial vendors to
	help facilitate collaboration with the Project.  This included
	presenting how the Project is organized, and how companies can
	get help, contribute back to the Project, promote their use of
	&os;, and for us to get their feedback on the work we are
	doing to help with our fundraising efforts.</p>

      <p>The new Foundation website and logo was launched, signaling
	the ongoing evolution of the Foundation identity and ability
	to better serve the &os; Project and community.  Find our
	more about our
	<a href="https://www.freebsdfoundation.org/blog/introducing-a-new-look-for-the-foundation/">new look</a>.</p>
    </body>
  </project>

  <project cat='kern'>
    <title>CAM I/O Scheduler</title>

    <contact>
      <person>
	<name>
	  <given>Warner</given>
	  <common>Losh</common>
	</name>
	<email>wlosh@netflix.com</email>
      </person>
    </contact>

    <links>
      <url href="https://people.freebsd.org/~imp/bsdcan2015/iosched-v3.pdf">I/O Scheduling in FreeBSD's CAM Subsystem (PDF)</url>
      <url href="https://www.youtube.com/watch?v=3WqOLolj5EU">The BSDCan 2015 Talk</url>
    </links>

    <body>
      <p>An enhanced CAM I/O scheduler has been committed to the tree.
	By default, this scheduler implements the old behavior.
	In addition, an advanced adaptive scheduler is available.
	Along with the scheduler, SATA disks can now use Queued Trims
	with devices that support them.  Details about the new
	scheduler are available in the
	<a href="https://people.freebsd.org/~imp/bsdcan2015/iosched-v3.pdf">I/O Scheduling in FreeBSD's CAM Subsystem article (PDF)</a>
	or from
	<a href="https://www.youtube.com/watch?v=3WqOLolj5EU">the BSDCan 2015 talk</a>.</p>

      <p>The adaptive I/O scheduler is disabled by default, but can be
	enabled with <tt>options CAM_ADAPTIVE_IOSCHED</tt> in the kernel config
	file.  This scheduler allows favoring reads over writes (or
	vice versa), controlling the IOPs, bandwidth, or concurrent
	operations (read, write, trim), and permits the selection of
	static or dynamic control of these operations.  In addition, a
	number of statistics are collected for drive operations that
	are published via sysctl.  One advanced use for the adaptive
	I/O scheduler is to compensate for deficiencies in some
	consumer-grade SSDs.  These SSDs exhibit a performance cliff
	if too much data is written to them too quickly due to
	internal garbage collection.  Without the I/O scheduler, read
	and write performance drop substantially once garbage
	collection kicks in.  The adaptive I/O scheduler can be
	configured to monitor read latency.  As read latency climbs,
	the I/O scheduler reduces the allowed write throughput, within
	limits, to attempt to maximize read performance.  A simple use
	of the adaptive I/O scheduler would be to limit write
	bandwidth, IOPs or concurrent operations statically.</p>

      <p>Future work on the I/O scheduler will be coupled with
	improvements to the upper layers.  The upper layers will be
	enhanced to communicate how urgent I/O requests are.  The I/O
	scheduler will inform the upper layers of how full the I/O
	queues are, so less urgent I/O can be submitted to the lower
	layers as quickly as possible without overwhelming the lower
	layers or starving other devices of requests.</p>
    </body>

    <sponsor>Netflix</sponsor>
  </project>
</report>
